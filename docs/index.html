<!doctype html><html lang=en-us><script src=https://code.jquery.com/jquery-3.6.0.min.js></script><script>$(document).ready(function(){$("#mode").on("click",updateDiagramImage),updateDiagramImage()});function updateDiagramImage(){const e=$("html").attr("data-dark-mode")!==void 0;console.debug("Dark mode:",e);const t=e?"-dark":"-light";$(".schema").each(function(){const n=$(this);let e=n.attr("src");e=e.replace(/(-dark|-light)\.svg$/,""),n.attr("src",e+t+".svg")})}</script><head><meta charset=utf-8><title>Docs | PositionPal</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=keywords content="Documentation,Hugo,Hugo Theme,Bootstrap"><meta name=author content="Colin Wilson - Lotus Labs"><meta name=email content="support@aigis.uk"><meta name=website content="https://lotusdocs.dev"><meta name=Version content="v0.1.0"><link rel=icon href=https://position-pal.github.io/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://position-pal.github.io/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://position-pal.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://position-pal.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://position-pal.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://position-pal.github.io/site.webmanifest><meta property="og:title" content="Docs"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://position-pal.github.io/docs/"><meta property="og:image" content="https://position-pal.github.io/opengraph/card-base-2_hu_e50a9076dbe8be81.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://position-pal.github.io/opengraph/card-base-2_hu_e50a9076dbe8be81.png"><meta name=twitter:title content="Docs"><meta name=twitter:description content><link rel=alternate type=application/atom+xml title="Atom feed for PositionPal" href=/index.xml><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script type=text/javascript src=https://position-pal.github.io/docs/js/flexsearch.bundle.min.249548594cb6843f3060a3cdd3043799676c59ce8db83358a3fc2e4d20598d05dfa6ce4994805d2835cb33b54dc9b9e7.js integrity=sha384-JJVIWUy2hD8wYKPN0wQ3mWdsWc6NuDNYo/wuTSBZjQXfps5JlIBdKDXLM7VNybnn crossorigin=anonymous></script><link rel=stylesheet href=/docs/scss/style.min.d324bc64538d015f9f079ff7407840ffc06414d5a911184ef5952c57a731f6d9dc97eb86ed1e44ff2b48b08eb005bc1e.css integrity=sha384-0yS8ZFONAV+fB5/3QHhA/8BkFNWpERhO9ZUsV6cx9tncl+uG7R5E/ytIsI6wBbwe crossorigin=anonymous></head><body><div class=content><div class="page-wrapper toggled"><nav id=sidebar class=sidebar-wrapper><div class=sidebar-brand><a href=/ aria-label=HomePage alt=HomePage><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></a></div><div class=sidebar-content style="height:calc(100% - 131px)"><ul class=sidebar-menu><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/1-introduction/introduction/><i class="material-icons me-2">Emoji_Objects</i>
Introduction</a></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Engineering</i>
Domain Analysis</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/1-functional-requirements/>Functional Requirements</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/2-business-requirements/>Business Requirements</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/3-quality-attributes/>Quality Attributes</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/4-event-storming/>Event Storming</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Location_City</i>
Architectural Design</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/1-bounded-contexts-copy/>Bounded Contexts</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/2-architecture-design/>Architecture Design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/3-microservices/>Microservices</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Construction</i>
Detailed Design</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/1-shared-kernel/>Shared Kernel design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/2-location-service/>Location Service design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/3-notification-service/>Notification Service design</a></li></ul></div></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/5-implementation/><i class="material-icons me-2">Code</i>
Implementation Details</a></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/6-validation/validation/><i class="material-icons me-2">Bug_Report</i>
Self Assessment and Validation</a></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/7-devops/devops/><i class="material-icons me-2">Rocket_Launch</i>
DevOps</a></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/8-deployment/><i class="material-icons me-2">Deployed_Code</i>
Deployment</a></li></ul></div><ul class="sidebar-footer list-unstyled mb-0"></ul></nav><main class="page-content bg-transparent"><div id=top-header class="top-header d-print-none"><div class="header-bar d-flex justify-content-between"><div class="d-flex align-items-center"><a href=/ class="logo-icon me-3" aria-label=HomePage alt=HomePage><div class=small><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div><div class=big><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div></a><button id=close-sidebar class="btn btn-icon btn-soft">
<span class="material-icons size-20 menu-icon align-middle">menu</span>
</button>
<button id=flexsearch-button class="ms-3 btn btn-soft" data-bs-toggle=collapse data-bs-target=#FlexSearchCollapse aria-expanded=false aria-controls=FlexSearchCollapse>
<span class="material-icons size-20 menu-icon align-middle">search</span>
<span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span><div class="d-none d-sm-block"><span class=flexsearch-button-keys><kbd class=flexsearch-button-cmd-key><svg width="44" height="15"><path d="M2.118 11.5A1.519 1.519.0 011 11.042 1.583 1.583.0 011 8.815a1.519 1.519.0 011.113-.458h.715V6.643h-.71A1.519 1.519.0 011 6.185 1.519 1.519.0 01.547 5.071 1.519 1.519.0 011 3.958 1.519 1.519.0 012.118 3.5a1.519 1.519.0 011.114.458A1.519 1.519.0 013.69 5.071v.715H5.4V5.071A1.564 1.564.0 016.976 3.5 1.564 1.564.0 018.547 5.071 1.564 1.564.0 016.976 6.643H6.261V8.357h.715a1.575 1.575.0 011.113 2.685 1.583 1.583.0 01-2.227.0A1.519 1.519.0 015.4 9.929V9.214H3.69v.715a1.519 1.519.0 01-.458 1.113A1.519 1.519.0 012.118 11.5zm0-.857a.714.714.0 00.715-.714V9.214H2.118a.715.715.0 100 1.429zm4.858.0a.715.715.0 100-1.429H6.261v.715a.714.714.0 00.715.714zM3.69 8.357H5.4V6.643H3.69zM2.118 5.786h.715V5.071a.714.714.0 00-.715-.714.715.715.0 00-.5 1.22A.686.686.0 002.118 5.786zm4.143.0h.715a.715.715.0 00.5-1.22.715.715.0 00-1.22.5z" fill="currentcolor"/><path d="M12.4 11.475H11.344l3.879-7.95h1.056z" fill="currentcolor"/><path d="M25.073 5.384l-.864.576a2.121 2.121.0 00-1.786-.923 2.207 2.207.0 00-2.266 2.326 2.206 2.206.0 002.266 2.325 2.1 2.1.0 001.782-.918l.84.617a3.108 3.108.0 01-2.622 1.293 3.217 3.217.0 01-3.349-3.317 3.217 3.217.0 013.349-3.317A3.046 3.046.0 0125.073 5.384z" fill="currentcolor"/><path d="M30.993 5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172z" fill="currentcolor"/><path d="M34.67 4.164c1.471.0 2.266.658 2.266 1.851.0 1.087-.832 1.809-2.134 1.855l2.107 2.691h-1.28L33.591 7.87H33.07v2.691H32.038v-6.4zm-1.6.969v1.8h1.572c.832.0 1.22-.3 1.22-.918s-.411-.882-1.22-.882z" fill="currentcolor"/><path d="M42.883 10.561H38.31v-6.4h1.033V9.583h3.54z" fill="currentcolor"/></svg>
</kbd><kbd class=flexsearch-button-key><svg width="15" height="15"><path d="M5.926 12.279H4.41L9.073 2.721H10.59z" fill="currentcolor"/></svg></kbd></span></div></button></div><div class="d-flex align-items-center"><ul class="list-unstyled mb-0"></ul><button id=mode class="btn btn-icon btn-default ms-2" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><title>Enable dark mode</title><path d="M24 42q-7.5.0-12.75-5.25T6 24t5.25-12.75T24 6q.4.0.85.025.45.025 1.15.075-1.8 1.6-2.8 3.95t-1 4.95q0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6.0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42zm0-3q5.45.0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75.0-9.775-4.025T19.2 15q0-1.2.25-2.575t.9-3.125q-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39zm-.2-14.85z"/></svg>
</span><span class=toggle-light><svg height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><title>Enable light mode</title><path d="M24 31q2.9.0 4.95-2.05T31 24t-2.05-4.95T24 17t-4.95 2.05T17 24t2.05 4.95T24 31zm0 3q-4.15.0-7.075-2.925T14 24t2.925-7.075T24 14t7.075 2.925T34 24t-2.925 7.075T24 34zM3.5 25.5q-.65.0-1.075-.425Q2 24.65 2 24t.425-1.075Q2.85 22.5 3.5 22.5h5q.65.0 1.075.425Q10 23.35 10 24t-.425 1.075T8.5 25.5zm36 0q-.65.0-1.075-.425Q38 24.65 38 24t.425-1.075T39.5 22.5h5q.65.0 1.075.425Q46 23.35 46 24t-.425 1.075-1.075.425zM24 10q-.65.0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2t1.075.425T25.5 3.5v5q0 .65-.425 1.075Q24.65 10 24 10zm0 36q-.65.0-1.075-.425T22.5 44.5v-5q0-.65.425-1.075Q23.35 38 24 38t1.075.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46zM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05.0.6-.4 1-.4.45-1.025.45T12 14.1zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45zM33.9 14.1q-.45-.45-.45-1.05.0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4t-1.075-.4zM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6.0 1.05.45.45.45.45 1.05.0.6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425zM24 24z"/></svg></span></button></div></div><div class=collapse id=FlexSearchCollapse><div class=flexsearch-container><div class=flexsearch-keymap><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd>
<kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd>
<span class=flexsearch-key-label>to navigate</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd>
<span class=flexsearch-key-label>to select</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd>
<span class=flexsearch-key-label>to close</span></li></div><form class="flexsearch position-relative flex-grow-1 ms-2 me-2"><div class="d-flex flex-row"><input id=flexsearch class=form-control type=search placeholder=Search aria-label=Search autocomplete=off>
<button id=hideFlexsearch type=button class="ms-2 btn btn-soft">
cancel</button></div><div id=suggestions class="shadow rounded-1 d-none"></div></form></div></div></div><div class=container-fluid><div class=layout-spacing><div class="d-md-flex justify-content-between align-items-center"><nav aria-label=breadcrumb class="d-inline-block pb-2 mt-1 mt-sm-0"><ul id=breadcrumbs class="breadcrumb bg-transparent mb-0" itemscope itemtype=https://schema.org/BreadcrumbList><li class="breadcrumb-item text-capitalize active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><i class="material-icons size-20 align-text-bottom" itemprop=name>Home</i>
<meta itemprop=position content='1'></li></ul></nav></div><div class="row flex-xl-nowrap"><div class="docs-toc col-xl-3 visually-hidden visually-hidden d-xl-block"><toc><div class="fw-bold text-uppercase mb-2">On this page</div><nav id=TableOfContents></nav></toc></div><div class="docs-toc-mobile visually-hidden visually-hidden d-print-none d-xl-none"><button id=toc-dropdown-btn class="btn-secondary dropdown-toggle" type=button data-bs-toggle=dropdown data-bs-offset=0,0 aria-expanded=false>
Table of Contents</button><nav id=toc-mobile></nav></div><div class="docs-content col-12 mt-0"><div class="mb-0 d-flex"><h1 class="content-title mb-0">Docs</h1></div><div id=content class=main-content><div class="row flex-xl-wrap"><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/1-introduction/introduction/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Emoji_Objects</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Introduction</p><p class="para card-text mb-0">What, Why, and How</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/2-domain-analysis/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Engineering</i>
<i class="material-icons icon-faint align-middle ms-auto" title=Directory>folder</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Domain Analysis</p><p class="para card-text mb-0">Knowledge crunching</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/3-arch-design/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Location_City</i>
<i class="material-icons icon-faint align-middle ms-auto" title=Directory>folder</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Architectural Design</p><p class="para card-text mb-0">Architectural design of the system.</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/4-detailed-design/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Construction</i>
<i class="material-icons icon-faint align-middle ms-auto" title=Directory>folder</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Detailed Design</p><p class="para card-text mb-0">The detailed design of the system.</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/5-implementation/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Code</i>
<i class="material-icons icon-faint align-middle ms-auto" title=Directory>folder</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Implementation Details</p><p class="para card-text mb-0">The internals of the system</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/6-validation/validation/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Bug_Report</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Self Assessment and Validation</p><p class="para card-text mb-0">Self assessment and validation of the system.</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/7-devops/devops/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Rocket_Launch</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">DevOps</p><p class="para card-text mb-0">DevOps practices and tools</p></div></div></a></div><div id=list-item class="col-md-4 col-12 mt-4 pt-2"><a class="text-decoration-none text-reset" href=https://position-pal.github.io/docs/8-deployment/><div class="card h-100 features feature-full-bg rounded p-4 position-relative overflow-hidden border-1"><span class="icon-color d-flex my-3"><i class="material-icons align-middle">Deployed_Code</i>
<i class="material-icons icon-faint align-middle ms-auto" title=Directory>folder</i></span><div class="card-body p-0 content"><p class="fs-5 fw-semibold card-title mb-1">Deployment</p><p class="para card-text mb-0">Deployment infrastructure</p></div></div></a></div></div></div><div><hr class=doc-hr><div id=doc-nav class=d-print-none></div></div></div></div></div></div><footer class="shadow py-3 d-print-none"><div class=container-fluid><div class="row align-items-center"><div class=col><div class="text-sm-start text-center mx-md-2"><p class=mb-0></p></div></div></div></div></footer></main></div></div><button onclick=topFunction() id=back-to-top aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12 10.224l-6.3 6.3-1.38-1.372L12 7.472l7.68 7.68-1.38 1.376z" style="fill:#fff"/></svg></button>
<script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script><script src=/docs/js/bootstrap.eac7ee3f6fa791c684e7a51fc2fd50b6f724271b9e39562e4fe8c3942412df3acbfc4045f043d03399dac70091207507.js integrity=sha384-6sfuP2+nkcaE56Ufwv1QtvckJxueOVYuT+jDlCQS3zrL/EBF8EPQM5naxwCRIHUH defer></script><script type=text/javascript src=https://position-pal.github.io/docs/js/bundle.min.4b07706b1da436c9600e641a8cf51af20b3e497ead85e0d0af7552a0314e8e317dc63bb69d12c072092518621478900d.js integrity=sha384-Swdwax2kNslgDmQajPUa8gs+SX6theDQr3VSoDFOjjF9xju2nRLAcgklGGIUeJAN crossorigin=anonymous defer></script><script type=module>
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


    

    

    index.add(
            {
                id:  0 ,
                href: "\/docs\/1-introduction\/introduction\/",
                title: "Introduction",
                description: "What, Why, and How",
                content: "\nPositionPal is a micro-services-based application for creating groups of trusted users with whom to share location, routes, and notify of dangerous or emergency situation to create an effective and timely service and support network.\nThe idea comes from some news read recently about young people who, on their way home at night in unsafe areas of the city, share their location in a WhatsApp group of users to support and watch each other.\n"
            }
        );
    index.add(
            {
                id:  1 ,
                href: "\/docs\/2-domain-analysis\/",
                title: "Domain Analysis",
                description: "Knowledge crunching",
                content: ""
            }
        );
    index.add(
            {
                id:  2 ,
                href: "\/docs\/2-domain-analysis\/1-functional-requirements\/",
                title: "Functional Requirements",
                description: "In this section are collected the functional requirements of the system in the form of User Stories.\nUser Stories linkUsers and groups linkLocation tracking link As a logged user I want to be able to start sharing my location with other groups’ member So that I’m able to be monitored\nAs a logged user who is sharing their position with a set of groups I want to be able to stop sharing it with a group’s members So that I can go where I want without letting know those member\n",
                content: "In this section are collected the functional requirements of the system in the form of User Stories.\nUser Stories linkUsers and groups linkLocation tracking link As a logged user I want to be able to start sharing my location with other groups’ member So that I’m able to be monitored\nAs a logged user who is sharing their position with a set of groups I want to be able to stop sharing it with a group’s members So that I can go where I want without letting know those member\nAs a logged user I want to be able to receive location updates from my groups’ members who are sharing their location So that I can view their live location on a map in real-time\nAs a logged user I want to be able to get the last known location and state of my groups’ member So that I can see their last reported location and status when live sharing is unavailable\nAs a logged user I want to be able to send an SOS alert comprising of my location to all members of all groups I’m participating despite the fact I’m or not sharing my location So that if I am in a dangerous situation my friends are notified and knows where I am\nAs a logged user I want to start sharing my location to all groups’ members after the trigger of an SOS alert So that my live location is automatically shared after an SOS alert to aid responders\nAs a logged user who is sharing their position I want to be able to share a journey towards a location specifying the time by which I’ll be there So that my friends know where I’m going\nAs a logged user who is sharing a journey I want to be able to trigger an SOS alert So that if I am in a dangerous situation my friends are notified\nAs a logged user in SOS mode I want to be able to stop the SOS So that my friend are notified I’m not anymore in danger\nAs a logged user who is sharing a journey I want to be able to stop it prematurely So that my friend knows a change in my plan have occurred\nAs a logged user I want to be able to see the entire path taken by my groups’ members who are sharing a journey or triggered an SOS alert So that I know where they have been during the dangerous situation\nAs a logged user I want to be able to receive a notification when one of my groups’ member start a journey or trigger an SOS alert So that I’m aware of it\nAs a logged user I want to be able to receive a notification if one my groups’ member who triggered an SOS alert goes offline or deactivate it So that I can take appropriate action\nAs a logged user I want to be able to receive a notification if one my groups’ member who started a journey stops moving, doesn’t arrive on time, goes offline, reaches their destination or deactivate it So that I can take appropriate action\nChat linkAcceptance tests linkFollowing BDD principles, starting from the above user stories, a set of acceptance test specifications have been defined. These specifications are written in Gherkin using Cucumber, providing a structured and human-readable format that facilitates communication between stakeholders, even for those who have not a technical background. Moreover, they serve end-to-end tests, ensuring that the system meets the defined requirements while aligning with end users’ expectations and needs (see the Validation section for more details about tests). By leveraging this approach, the tests remain clear, maintainable, and closely tied to business objectives.\nLocation tracking link Feature: Users real-time tracking Background: Given I am a logged user * with a registered device And I am in a group with other users Scenario: User can track other users in their groups in real-time When I access my group tracking information Then I should see the real-time location of online group members And the last known location of offline group members Scenario: User is able to share their location with other group members When I start sharing my location Then my last known location should be updated And my state should be `Active` Scenario: User can stop sharing their location with other group members When I stop sharing my location with that group Then the group's members should not see my location anymore * my state should be updated to `Inactive` But my last known location should still be available Feature: Users routes tracking Background: Given I am a logged user * with a registered device And I am in a group with other users Scenario: User can activate a route that is recorded and visible to group members When I activate the routing mode indicating a destination and the ETA Then my state is updated to `Routing` * my group's members receive a notification indicating I've started a routing And my group's members can see the route I've been taken since activating routing mode Scenario Outline: A route can be stopped Given I'm in routing mode When Then the routing is stopped * the route discarded * my state is updated to `Active` And my group's members receive a notification indicating Examples: | event | | I have arrived at the destination | | I have stopped the routing | Scenario Outline: Route notifications Given I'm in routing mode When Then my group's members receive a notification indicating Examples: | event | | I have gone offline | | I have not arrived by the estimated time | | I have been stuck in the same position for a while | "
            }
        );
    index.add(
            {
                id:  3 ,
                href: "\/docs\/2-domain-analysis\/2-business-requirements\/",
                title: "Business Requirements",
                description: "Glossary linkUse cases linkLocation Tracking link Start Location Sharing\nActor: Group member Description: The user starts sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to share their location with. Main Scenario: The user selects the group they want to share their location with; The user starts sharing their location with members of that group; A visual feedback is sent to the user notifying them the location sharing has started. Postcondition: The user’s location is shared with the selected group members. Stop Location Sharing\n",
                content: "Glossary linkUse cases linkLocation Tracking link Start Location Sharing\nActor: Group member Description: The user starts sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to share their location with. Main Scenario: The user selects the group they want to share their location with; The user starts sharing their location with members of that group; A visual feedback is sent to the user notifying them the location sharing has started. Postcondition: The user’s location is shared with the selected group members. Stop Location Sharing\nActor: Group member Description: The user stops sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to stop sharing their location with; The user is currently sharing their location. Main Scenario: The user selects the group they want to stop sharing their location with; The user stops sharing their location; A visual feedback is sent to the user notifying them the location sharing has been turned off; Postcondition: The user’s location is no longer shared with the selected group members. Send a GPS Location Update\nActor: Group member Description: The user sends a GPS location update to the system for a specific set of groups. Preconditions: The user is logged and is a member of the group they want to send the location to; Main Scenario: The user sends a GPS location update; The system updates the user’s location. Alternative Scenario: The user have triggered the SOS The user sends a GPS location update; The system updates the user’s location and their path in SOS mode. Alternative Scenario: The user is sharing a journey. The user sends a GPS location update; The system updates the user’s location and the path of the journey; The system verify if the user have reached the destination. If so, stops the journey sharing, otherwise it continues; The system verify if the user is stuck or the ETA is elapsed. If so, trigger a notification for all group members. Postcondition: The user’s location is updated server-side and their state is ‘Active’. View Real-time Group Members’ Locations and State on a Map\nActor: Group member Description: The user views the real-time locations and state of group members on a map. Preconditions: The user is logged and is a member of the group they want to view. Main Scenario: The user selects the group they want to view; The user views the real-time locations and state of all group members on a map. Trigger SOS Alert\nActor: Group member description: The user triggers an SOS alert because they are in danger. Preconditions: The user is logged and is part of at least one group; The user is not already in SOS mode. Main Scenario: The user triggers the SOS alert; The system updates the user’s location and enters SOS mode, starting recording their path; The system sends a notification to all group members. Postcondition: The user is in ‘SOS’ mode. Stop SOS Mode\nActor: Group member Description: The user stops the SOS mode. Preconditions: The user is logged and is part of at least one group; The user is in SOS mode. Main Scenario: The user stops the SOS mode; The system stops recording the user’s path; The system sends a notification to all group members; Postcondition: The user is no longer in ‘SOS’ mode, but in ‘Active’ mode. Share a Journey\nActor: Group member description: The user start sharing a journey with a group; Preconditions: The user is logged and is part of the group they want to share the journey with; The user is not sharing a journey. Main Scenario: The user selects the group they want to share the journey with; The user starts sharing the journey by choosing the destination and the estimated time of arrival; The system sends a notification to all group members. Postcondition: The user is sharing the journey and their state is ‘Routing’. Stop Journey Sharing\nActor: Group member Description: The user stops sharing the journey. Preconditions: The user is logged and is part of the group they want to stop sharing the journey with; The user is sharing a journey. Main Scenario: The user selects the group they want to stop sharing the journey with; The user stops sharing the journey; The system sends a notification to all group members that the journey sharing has been stopped. Postcondition: The user is no longer sharing the journey and their state is ‘Active’. View Path of a Group Member on a Journey or in SOS Mode\nActor: Group member Description: The user views the path of a group member on a journey or in SOS mode. Preconditions: The user is logged and is part of the group they want to view the path of a group member; Main Scenario: The user selects the group they want to view the path of a group member; The user selects the group member they want to view the path of; The user views the path of the selected group member on a map. Postcondition: The user has viewed the path of the selected group member. "
            }
        );
    index.add(
            {
                id:  4 ,
                href: "\/docs\/2-domain-analysis\/3-quality-attributes\/",
                title: "Quality Attributes",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  5 ,
                href: "\/docs\/2-domain-analysis\/4-event-storming\/",
                title: "Event Storming",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  6 ,
                href: "\/docs\/3-arch-design\/",
                title: "Architectural Design",
                description: "Architectural design of the system.",
                content: ""
            }
        );
    index.add(
            {
                id:  7 ,
                href: "\/docs\/3-arch-design\/1-bounded-contexts-copy\/",
                title: "Bounded Contexts",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  8 ,
                href: "\/docs\/3-arch-design\/2-architecture-design\/",
                title: "Architecture Design",
                description: "C\u0026C View linkThe following diagram shows the UML Component and Connector (C\u0026C) view of the system, providing a high-level picture of the system’s runtime entities in action and their boundaries.\n",
                content: "C\u0026C View linkThe following diagram shows the UML Component and Connector (C\u0026C) view of the system, providing a high-level picture of the system’s runtime entities in action and their boundaries.\n"
            }
        );
    index.add(
            {
                id:  9 ,
                href: "\/docs\/3-arch-design\/3-microservices\/",
                title: "Microservices",
                description: "",
                content: ""
            }
        );
    index.add(
            {
                id:  10 ,
                href: "\/docs\/4-detailed-design\/",
                title: "Detailed Design",
                description: "The detailed design of the system.",
                content: ""
            }
        );
    index.add(
            {
                id:  11 ,
                href: "\/docs\/4-detailed-design\/1-shared-kernel\/",
                title: "Shared Kernel design",
                description: "Structure link ",
                content: "Structure link "
            }
        );
    index.add(
            {
                id:  12 ,
                href: "\/docs\/4-detailed-design\/2-location-service\/",
                title: "Location Service design",
                description: "The location service is responsible for the real-time location tracking and management of the users tracking information.\nThis chapter explains the strategies used to meet the requirements identified in the analysis.\nThe design is based on the Domain-Driven Design principles, focusing on the structure, behavior, and interaction of the system.\nAbstract Design link Structure linkThe main domain concepts and events are presented hereafter and reified in the following classes structure, following the DDD building blocks.\n",
                content: "The location service is responsible for the real-time location tracking and management of the users tracking information.\nThis chapter explains the strategies used to meet the requirements identified in the analysis.\nThe design is based on the Domain-Driven Design principles, focusing on the structure, behavior, and interaction of the system.\nAbstract Design link Structure linkThe main domain concepts and events are presented hereafter and reified in the following classes structure, following the DDD building blocks.\nScope: A value object representing the context in which an event occurs. It is composed of a user and a group, capturing the idea that a user’s state can differ from group to group, enabling group-specific visibility and tracking. Tracking: An entity representing the user’s route information at a certain point in time, it is composed of a list of positions that can be interpolated to form a path between two geographical positions. MonitorableTracking: a specialized Tracking entity that includes the mode of transportation, the destination, the expected arrival time, enabling the system to monitor the user’s route and trigger alerts when necessary. Session: An aggregate root entity storing the overall state of a user in a group at a certain point in time. It acts as a state machine, updating the state and the tracking information based on the received events, ensuring the consistency of the user’s state is maintained. DomainEvent: An interface representing the base structure of a domain event, capturing the timestamp, the user, and the group in which the event occurs. It is the base type for all the events that occur in the system. DrivingEvent: An interface representing the base structure of a driving event, i.e. a valuable event guiding an application use case. ClientDrivingEvent: A specialized DrivingEvent interface representing the events that are triggered by the user’s actions, such as sampling the location, triggering an SOS alert, starting or stopping a routing. InternalDrivingEvent: A specialized DrivingEvent interface representing the events that are triggered by the system, such as the user going offline, triggering a stuck alert, or a timeout alert. DrivenEvent: An interface representing the base structure of a driven event, i.e. an event triggered by the system as a result of some system state change / action. Behavior link As an event driven architecture, the state of each group’s member can be described by the following state diagram, drawing the possible state transitions that can be fired by one of the above DrivingEvent.\n"
            }
        );
    index.add(
            {
                id:  13 ,
                href: "\/docs\/4-detailed-design\/3-notification-service\/",
                title: "Notification Service design",
                description: "Structure link ",
                content: "Structure link "
            }
        );
    index.add(
            {
                id:  14 ,
                href: "\/docs\/5-implementation\/",
                title: "Implementation Details",
                description: "The internals of the system",
                content: ""
            }
        );
    index.add(
            {
                id:  15 ,
                href: "\/docs\/6-validation\/validation\/",
                title: "Self Assessment and Validation",
                description: "Self assessment and validation of the system.",
                content: "Different types of automated tests are in place to ensure the correctness of the system, as well as the quality of the software product as a whole.\nArchitectural Testing linkArchUnit have been used to enforce architectural constraints, making sure to adhere to the Hexagonal architecture (otherwise said Onion or Ports and Adapters) and preventing unwanted dependencies, maintaining separation of concerns and ensuring architectural decisions are consistently followed over time.\nAn example of arch unit test specification and rules used is shown below and can be found here.\n\"Project-wise architecture\" should \"adhere to ports and adapters, a.k.a onion architecture\" in: val locationGroup = \"io.github.positionpal.location\" val code = ClassFileImporter().importPackages(locationGroup) onionArchitecture() .domainModels(s\"$locationGroup.commons..\", s\"$locationGroup.domain..\") .applicationServices(s\"$locationGroup.application..\", s\"$locationGroup.presentation..\") .adapter(\"real time tracker component\", s\"$locationGroup.tracking..\") .adapter(\"storage\", s\"$locationGroup.storage..\") .adapter(\"message broker\", s\"$locationGroup.messages..\") .adapter(\"gRPC API\", s\"$locationGroup.grpc..\") .adapter(\"web sockets and http web API\", s\"$locationGroup.ws..\") .ignoreDependency(havingEntrypointAsOrigin, andAnyTarget) .because(\"`Entrypoint` submodule contains the main method wiring all the adapters together.\") .ensureAllClassesAreContainedInArchitectureIgnoring(havingEntrypointAsOrigin) .withOptionalLayers(true) .check(code) private def havingEntrypointAsOrigin = DescribedPredicate.describe[JavaClass](\"in `entrypoint` package\", _.getPackage.getName.contains(\"entrypoint\")) private def andAnyTarget = DescribedPredicate.alwaysTrue() This uses the onionArchitecture rule to enforce the following architectural constraints:\nthe domainModels contains all the domain entities and do not depend on any other layer; the applicationServices contains all the application services that are needed to run the application and use cases. They can use and see only the domain models and no other layer; the adapters modules contains logic to connect to external systems and/or infrastructure. They can see and use both the domain models and the application services, but no adapter can depend on another one. Unit tests linkIntegration tests linkEnd-to-End tests linkAs presented in the Domain Analysis section, the system has been end-to-end validated and tested using Cucumber…\nQuality Assurance linkFor all the projects and repositories, depending on the language they are developed in, different Quality Assurance (QA) tools have been used to validate the quality of the codebase. These tools ensure adherence to coding standards, maintainability, and early detection of potential issues, if appropriately integrated into Continuous Integration (as per DevOps best practices).\nThe following tools have been used for Scala:\nScalafmt: a code formatter ensuring consistency in code style across the project. Scalastyle: a tool for refactoring and linting Scala code, allowing automated fixes for common issues and ensuring best practices. The following tools have been employed for Kotlin:\nktlint: a linter and formatter that enforces Kotlin coding standards automatically. detekt: a static code analysis tool for Kotlin that helps identify code smells, complexity issues, and potential security risks. For Javascript, ESLint, a static analysis tool that enforces coding style rules and detects problematic patterns in JavaScript code.\nTo further improve code quality and reliability, aggressive compilation options have been used across all projects. These options ensure that all warnings are treated as errors, preventing the introduction of potential issues into the codebase. This approach enforces strict compliance with best practices and minimizes the risk of overlooking important warnings that could lead to runtime errors or degraded maintainability.\nBy integrating these QA tools and enforcing strict compilation settings, the project maintains high code quality, reduces technical debt, and ensures consistency across different languages and repositories.\nFor more details on the QA tools and configuration used please refer to the DevOps section.\n"
            }
        );
    index.add(
            {
                id:  16 ,
                href: "\/docs\/7-devops\/devops\/",
                title: "DevOps",
                description: "DevOps practices and tools",
                content: "Build Automation linkScala Extras linkContinuous Integration and Delivery linkgraph TB; dispatcher([\"0. dispatcher\"]) dispatcher --\u003e build; build([\"1. matrix build\"]); dry-delivery([\"2. dry delivery\"]) build --\u003e dry-delivery; release([\"3. release\"]) dry-delivery --\u003e release; publish-images([\"5. publish-images\"]) release --\u003e publish-images; publish-doc([\"4. publish-doc\"]) release --\u003e publish-doc; success([\"6. success\"]) build .-\u003e success dry-delivery .-\u003e success release .-\u003e success publish-doc --\u003e success publish-images --\u003e success; Bots linkContinuous Deployment link"
            }
        );
    index.add(
            {
                id:  17 ,
                href: "\/docs\/8-deployment\/",
                title: "Deployment",
                description: "Deployment infrastructure",
                content: ""
            }
        );
    index.add(
            {
                id:  18 ,
                href: "\/docs\/",
                title: "Docs",
                description: "",
                content: ""
            }
        );
    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script></body></html>