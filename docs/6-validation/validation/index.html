<!doctype html><html lang=en-us><script src=https://code.jquery.com/jquery-3.6.0.min.js></script><script>$(document).ready(function(){$("#mode").on("click",updateDiagramImage),updateDiagramImage()});function updateDiagramImage(){const e=$("html").attr("data-dark-mode")!==void 0;console.debug("Dark mode:",e);const t=e?"-dark":"-light";$(".schema").each(function(){const n=$(this);let e=n.attr("src");e=e.replace(/(-dark|-light)\.svg$/,""),n.attr("src",e+t+".svg")})}</script><head><meta charset=utf-8><title>Self Assessment and Validation | PositionPal</title>
<meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Self assessment and validation of the system."><meta name=keywords content="Documentation,Hugo,Hugo Theme,Bootstrap"><meta name=author content="Colin Wilson - Lotus Labs"><meta name=email content="support@aigis.uk"><meta name=website content="https://lotusdocs.dev"><meta name=Version content="v0.1.0"><link rel=icon href=https://position-pal.github.io/favicon.ico sizes=any><link rel=icon type=image/svg+xml href=https://position-pal.github.io/favicon.svg><link rel=apple-touch-icon sizes=180x180 href=https://position-pal.github.io/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=https://position-pal.github.io/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=https://position-pal.github.io/favicon-16x16.png><link rel=manifest crossorigin=use-credentials href=https://position-pal.github.io/site.webmanifest><meta property="og:title" content="Self Assessment and Validation"><meta property="og:description" content="Self assessment and validation of the system."><meta property="og:type" content="article"><meta property="og:url" content="https://position-pal.github.io/docs/6-validation/validation/"><meta property="og:image" content="https://position-pal.github.io/opengraph/card-base-2_hu_e7e97b832fcfe950.png"><meta property="article:section" content="docs"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://position-pal.github.io/opengraph/card-base-2_hu_e7e97b832fcfe950.png"><meta name=twitter:title content="Self Assessment and Validation"><meta name=twitter:description content="Self assessment and validation of the system."><link rel=alternate type=application/atom+xml title="Atom feed for PositionPal" href=/index.xml><script>(()=>{var t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,e=localStorage.getItem("theme");t&&e===null&&(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")),t&&e==="dark"&&document.documentElement.setAttribute("data-dark-mode",""),e==="dark"&&document.documentElement.setAttribute("data-dark-mode","")})()</script><script type=text/javascript src=https://position-pal.github.io/docs/js/flexsearch.bundle.min.249548594cb6843f3060a3cdd3043799676c59ce8db83358a3fc2e4d20598d05dfa6ce4994805d2835cb33b54dc9b9e7.js integrity=sha384-JJVIWUy2hD8wYKPN0wQ3mWdsWc6NuDNYo/wuTSBZjQXfps5JlIBdKDXLM7VNybnn crossorigin=anonymous></script><link rel=stylesheet href=/docs/scss/style.min.b0b122dce29729fc3cd525735bf1fa17304feb138cb2c36b798dd82d1829a5538ccbdf94b4f30a725c0a8335a945fc57.css integrity=sha384-sLEi3OKXKfw81SVzW/H6FzBP6xOMssNreY3YLRgppVOMy9+UtPMKclwKgzWpRfxX crossorigin=anonymous></head><body><div class=content><div class="page-wrapper toggled"><nav id=sidebar class=sidebar-wrapper><div class=sidebar-brand><a href=/ aria-label=HomePage alt=HomePage><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></a></div><div class=sidebar-content style="height:calc(100% - 131px)"><ul class=sidebar-menu><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/1-introduction/introduction/><i class="material-icons me-2">Emoji_Objects</i>
Introduction</a></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Engineering</i>
Domain Analysis</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/1-functional-requirements/>Functional Requirements</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/2-business-requirements/>Business Requirements</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/3-quality-attributes/>Quality Attributes</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/2-domain-analysis/4-event-storming/>Event Storming</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Location_City</i>
Architectural Design</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/1-bounded-contexts/>Bounded Contexts</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/2-architecture-design/>Architecture Design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/3-arch-design/4-patterns/>Architectural Patterns</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Construction</i>
Detailed Design</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/1-shared-kernel/>Shared Kernel design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/2-location-service/>Location Service design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/4-chat-service/>Chat Service design</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/4-detailed-design/3-notification-service/>Notification Service design</a></li></ul></div></li><li class=sidebar-dropdown><button class=btn>
<i class="material-icons me-2">Code</i>
Implementation Details</button><div class=sidebar-submenu><ul><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/5-implementation/1-location-service/>Location Service implementation details</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/5-implementation/2-notification-service/>Notification Service implementation details</a></li><li><a class=sidebar-nested-link href=https://position-pal.github.io/docs/5-implementation/3-chat-service/>Chat Service implementation details</a></li></ul></div></li><li class=current><a class=sidebar-root-link href=https://position-pal.github.io/docs/6-validation/validation/><i class="material-icons me-2">Bug_Report</i>
Self Assessment and Validation</a></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/7-devops/devops/><i class="material-icons me-2">Rocket_Launch</i>
DevOps</a></li><li><a class=sidebar-root-link href=https://position-pal.github.io/docs/8-deployment/><i class="material-icons me-2">Deployed_Code</i>
Deployment</a></li></ul></div><ul class="sidebar-footer list-unstyled mb-0"></ul></nav><main class="page-content bg-transparent"><div id=top-header class="top-header d-print-none"><div class="header-bar d-flex justify-content-between"><div class="d-flex align-items-center"><a href=/ class="logo-icon me-3" aria-label=HomePage alt=HomePage><div class=small><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div><div class=big><svg id="Layer_1" viewBox="0 0 250 250"><path d="m143 39.5c-18 0-18 18-18 18s0-18-18-18H22c-2.76.0-5 2.24-5 5v143c0 2.76 2.24 5 5 5h76c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h76c2.76.0 5-2.24 5-5V44.5c0-2.76-2.24-5-5-5h-85zM206 163c0 1.38-1.12 2.5-2.5 2.5H143c-18 0-18 18-18 18s0-18-18-18H46.5c-1.38.0-2.5-1.12-2.5-2.5V69c0-1.38 1.12-2.5 2.5-2.5H98c7.2.0 8.64 11.52 8.93 16.13.07 1.05.95 1.87 2 1.87h32.14c1.06.0 1.94-.82 2-1.87.29-4.61 1.73-16.13 8.93-16.13h51.5c1.38.0 2.5 1.12 2.5 2.5v94z" style="fill:#06f"/></svg></div></a><button id=close-sidebar class="btn btn-icon btn-soft">
<span class="material-icons size-20 menu-icon align-middle">menu</span>
</button>
<button id=flexsearch-button class="ms-3 btn btn-soft" data-bs-toggle=collapse data-bs-target=#FlexSearchCollapse aria-expanded=false aria-controls=FlexSearchCollapse>
<span class="material-icons size-20 menu-icon align-middle">search</span>
<span class="flexsearch-button-placeholder ms-1 me-2 d-none d-sm-block">Search</span><div class="d-none d-sm-block"><span class=flexsearch-button-keys><kbd class=flexsearch-button-cmd-key><svg width="44" height="15"><path d="M2.118 11.5A1.519 1.519.0 011 11.042 1.583 1.583.0 011 8.815a1.519 1.519.0 011.113-.458h.715V6.643h-.71A1.519 1.519.0 011 6.185 1.519 1.519.0 01.547 5.071 1.519 1.519.0 011 3.958 1.519 1.519.0 012.118 3.5a1.519 1.519.0 011.114.458A1.519 1.519.0 013.69 5.071v.715H5.4V5.071A1.564 1.564.0 016.976 3.5 1.564 1.564.0 018.547 5.071 1.564 1.564.0 016.976 6.643H6.261V8.357h.715a1.575 1.575.0 011.113 2.685 1.583 1.583.0 01-2.227.0A1.519 1.519.0 015.4 9.929V9.214H3.69v.715a1.519 1.519.0 01-.458 1.113A1.519 1.519.0 012.118 11.5zm0-.857a.714.714.0 00.715-.714V9.214H2.118a.715.715.0 100 1.429zm4.858.0a.715.715.0 100-1.429H6.261v.715a.714.714.0 00.715.714zM3.69 8.357H5.4V6.643H3.69zM2.118 5.786h.715V5.071a.714.714.0 00-.715-.714.715.715.0 00-.5 1.22A.686.686.0 002.118 5.786zm4.143.0h.715a.715.715.0 00.5-1.22.715.715.0 00-1.22.5z" fill="currentcolor"/><path d="M12.4 11.475H11.344l3.879-7.95h1.056z" fill="currentcolor"/><path d="M25.073 5.384l-.864.576a2.121 2.121.0 00-1.786-.923 2.207 2.207.0 00-2.266 2.326 2.206 2.206.0 002.266 2.325 2.1 2.1.0 001.782-.918l.84.617a3.108 3.108.0 01-2.622 1.293 3.217 3.217.0 01-3.349-3.317 3.217 3.217.0 013.349-3.317A3.046 3.046.0 0125.073 5.384z" fill="currentcolor"/><path d="M30.993 5.142h-2.07v5.419H27.891V5.142h-2.07V4.164h5.172z" fill="currentcolor"/><path d="M34.67 4.164c1.471.0 2.266.658 2.266 1.851.0 1.087-.832 1.809-2.134 1.855l2.107 2.691h-1.28L33.591 7.87H33.07v2.691H32.038v-6.4zm-1.6.969v1.8h1.572c.832.0 1.22-.3 1.22-.918s-.411-.882-1.22-.882z" fill="currentcolor"/><path d="M42.883 10.561H38.31v-6.4h1.033V9.583h3.54z" fill="currentcolor"/></svg>
</kbd><kbd class=flexsearch-button-key><svg width="15" height="15"><path d="M5.926 12.279H4.41L9.073 2.721H10.59z" fill="currentcolor"/></svg></kbd></span></div></button></div><div class="d-flex align-items-center"><ul class="list-unstyled mb-0"></ul><button id=mode class="btn btn-icon btn-default ms-2" type=button aria-label="Toggle user interface mode">
<span class=toggle-dark><svg height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><title>Enable dark mode</title><path d="M24 42q-7.5.0-12.75-5.25T6 24t5.25-12.75T24 6q.4.0.85.025.45.025 1.15.075-1.8 1.6-2.8 3.95t-1 4.95q0 4.5 3.15 7.65Q28.5 25.8 33 25.8q2.6.0 4.95-.925T41.9 22.3q.05.6.075.975Q42 23.65 42 24q0 7.5-5.25 12.75T24 42zm0-3q5.45.0 9.5-3.375t5.05-7.925q-1.25.55-2.675.825Q34.45 28.8 33 28.8q-5.75.0-9.775-4.025T19.2 15q0-1.2.25-2.575t.9-3.125q-4.9 1.35-8.125 5.475Q9 18.9 9 24q0 6.25 4.375 10.625T24 39zm-.2-14.85z"/></svg>
</span><span class=toggle-light><svg height="30" width="30" viewBox="0 0 48 48" fill="currentcolor"><title>Enable light mode</title><path d="M24 31q2.9.0 4.95-2.05T31 24t-2.05-4.95T24 17t-4.95 2.05T17 24t2.05 4.95T24 31zm0 3q-4.15.0-7.075-2.925T14 24t2.925-7.075T24 14t7.075 2.925T34 24t-2.925 7.075T24 34zM3.5 25.5q-.65.0-1.075-.425Q2 24.65 2 24t.425-1.075Q2.85 22.5 3.5 22.5h5q.65.0 1.075.425Q10 23.35 10 24t-.425 1.075T8.5 25.5zm36 0q-.65.0-1.075-.425Q38 24.65 38 24t.425-1.075T39.5 22.5h5q.65.0 1.075.425Q46 23.35 46 24t-.425 1.075-1.075.425zM24 10q-.65.0-1.075-.425Q22.5 9.15 22.5 8.5v-5q0-.65.425-1.075Q23.35 2 24 2t1.075.425T25.5 3.5v5q0 .65-.425 1.075Q24.65 10 24 10zm0 36q-.65.0-1.075-.425T22.5 44.5v-5q0-.65.425-1.075Q23.35 38 24 38t1.075.425.425 1.075v5q0 .65-.425 1.075Q24.65 46 24 46zM12 14.1l-2.85-2.8q-.45-.45-.425-1.075.025-.625.425-1.075.45-.45 1.075-.45t1.075.45L14.1 12q.4.45.4 1.05.0.6-.4 1-.4.45-1.025.45T12 14.1zm24.7 24.75L33.9 36q-.4-.45-.4-1.075t.45-1.025q.4-.45 1-.45t1.05.45l2.85 2.8q.45.45.425 1.075-.025.625-.425 1.075-.45.45-1.075.45t-1.075-.45zM33.9 14.1q-.45-.45-.45-1.05.0-.6.45-1.05l2.8-2.85q.45-.45 1.075-.425.625.025 1.075.425.45.45.45 1.075t-.45 1.075L36 14.1q-.4.4-1.025.4t-1.075-.4zM9.15 38.85q-.45-.45-.45-1.075t.45-1.075L12 33.9q.45-.45 1.05-.45.6.0 1.05.45.45.45.45 1.05.0.6-.45 1.05l-2.8 2.85q-.45.45-1.075.425-.625-.025-1.075-.425zM24 24z"/></svg></span></button></div></div><div class=collapse id=FlexSearchCollapse><div class=flexsearch-container><div class=flexsearch-keymap><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow down" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 3.5v8m3-3-3 3-3-3"/></g></svg></kbd>
<kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Arrow up" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M7.5 11.5v-8m3 3-3-3-3 3"/></g></svg></kbd>
<span class=flexsearch-key-label>to navigate</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Enter key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M12 3.53088v3c0 1-1 2-2 2H4m3 3-3-3 3-3"/></g></svg></kbd>
<span class=flexsearch-key-label>to select</span></li><li><kbd class=flexsearch-button-cmd-key><svg width="15" height="15" aria-label="Escape key" role="img"><g fill="none" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.2"><path d="M13.6167 8.936c-.1065.3583-.6883.962-1.4875.962-.7993.0-1.653-.9165-1.653-2.1258v-.5678c0-1.2548.7896-2.1016 1.653-2.1016s1.3601.4778 1.4875 1.0724M9 6c-.1352-.4735-.7506-.9219-1.46-.8972-.7092.0246-1.344.57-1.344 1.2166s.4198.8812 1.3445.9805C8.465 7.3992 8.968 7.9337 9 8.5s-.454 1.398-1.4595 1.398C6.6593 9.898 6 9 5.963 8.4851m-1.4748.5368c-.2635.5941-.8099.876-1.5443.876s-1.7073-.6248-1.7073-2.204v-.4603c0-1.0416.721-2.131 1.7073-2.131.9864.0 1.6425 1.031 1.5443 2.2492h-2.956"/></g></svg></kbd>
<span class=flexsearch-key-label>to close</span></li></div><form class="flexsearch position-relative flex-grow-1 ms-2 me-2"><div class="d-flex flex-row"><input id=flexsearch class=form-control type=search placeholder=Search aria-label=Search autocomplete=off>
<button id=hideFlexsearch type=button class="ms-2 btn btn-soft">
cancel</button></div><div id=suggestions class="shadow rounded-1 d-none"></div></form></div></div></div><div class=container-fluid><div class=layout-spacing><div class="d-md-flex justify-content-between align-items-center"><nav aria-label=breadcrumb class="d-inline-block pb-2 mt-1 mt-sm-0"><ul id=breadcrumbs class="breadcrumb bg-transparent mb-0" itemscope itemtype=https://schema.org/BreadcrumbList><li class="breadcrumb-item text-capitalize active" aria-current=page itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><a itemprop=item href=/docs/><i class="material-icons size-20 align-text-bottom" itemprop=name>Home</i>
</a><meta itemprop=position content='1'></li><li class="breadcrumb-item text-capitalize active" itemprop=itemListElement itemscope itemtype=https://schema.org/ListItem><span itemprop=name>Self Assessment and Validation</span>
<meta itemprop=position content='2'></li></ul></nav></div><div class="row flex-xl-nowrap"><div class="docs-toc col-xl-3 d-xl-block"><toc><div class="fw-bold text-uppercase mb-2">On this page</div><nav id=TableOfContents><ul><li><a href=#architectural-testing>Architectural Testing</a></li><li><a href=#unit-tests>Unit tests</a></li><li><a href=#integration-tests>Integration tests</a></li><li><a href=#end-to-end-tests>End-to-End tests</a></li><li><a href=#stress-test>Stress Test</a></li><li><a href=#quality-assurance>Quality Assurance</a></li></ul></nav></toc></div><div class="docs-toc-mobile d-print-none d-xl-none"><button id=toc-dropdown-btn class="btn-secondary dropdown-toggle" type=button data-bs-toggle=dropdown data-bs-offset=0,0 aria-expanded=false>
Table of Contents</button><nav id=toc-mobile><ul class=dropdown-menu><li><a href=#architectural-testing>Architectural Testing</a></li><li><a href=#unit-tests>Unit tests</a></li><li><a href=#integration-tests>Integration tests</a></li><li><a href=#end-to-end-tests>End-to-End tests</a></li><li><a href=#stress-test>Stress Test</a></li><li><a href=#quality-assurance>Quality Assurance</a></li></ul></nav></div><div class="docs-content col-12 col-xl-9 mt-0"><div class="mb-0 d-flex"><h1 class="content-title mb-0">Self Assessment and Validation</h1></div><div id=content class=main-content><div data-prismjs-copy data-prismjs-copy-success data-prismjs-copy-error><p>Different types of <em>automated</em> tests, at different granularity, are in place to ensure the correctness of the system, as well as the quality of the software product as a whole.</p><p>The testing strategy follows <a href=https://martinfowler.com/articles/practical-test-pyramid.html rel=external target=_blank>Martin Fowler’s Test Pyramid idea<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>, which advocates for a higher number of low-level unit tests that are that are fast and cost-effective, complemented by fewer high-level integration and end-to-end tests that, while slower and more complex, validate the overall system&rsquo;s functionalities.</p><p>Each type of test has been designed and executed accordingly, as detailed in the following sections.</p><h2 id=architectural-testing>Architectural Testing <a href=#architectural-testing class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p><a href=https://www.archunit.org rel=external target=_blank>ArchUnit<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> have been used to enforce architectural constraints, making sure to adhere to the <em>Hexagonal architecture</em> (also known as <em>Onion architecture</em> or <em>Ports and Adapters</em>), preventing unwanted dependencies, maintaining separation of concerns and ensuring architectural decisions are consistently followed over time.</p><p>An example of arch unit test specification and rules used is shown below and can be found <a href=https://github.com/position-pal/location-service/blob/main/entrypoint/src/test/scala/io/github/positionpal/location/entrypoint/ArchitecturalTest.scala rel=external target=_blank>here<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-scala data-lang=scala><span style=display:flex><span><span style=color:#e6db74>&#34;Project-wise architecture&#34;</span> should <span style=color:#e6db74>&#34;adhere to ports and adapters, a.k.a onion architecture&#34;</span> in<span style=color:#66d9ef>:</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>val</span> <span style=color:#66d9ef>locationGroup</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;io.github.positionpal.location&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>val</span> code <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>ClassFileImporter</span><span style=color:#f92672>().</span>importPackages<span style=color:#f92672>(</span>locationGroup<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>  onionArchitecture<span style=color:#f92672>()</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>domainModels<span style=color:#f92672>(</span><span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.commons..&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.domain..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>applicationServices<span style=color:#f92672>(</span><span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.application..&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.presentation..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>adapter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;real time tracker component&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.tracking..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>adapter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;storage&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.storage..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>adapter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;message broker&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.messages..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>adapter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;gRPC API&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.grpc..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>adapter<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;web sockets and http web API&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>s&#34;</span><span style=color:#e6db74>$locationGroup</span><span style=color:#e6db74>.ws..&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ignoreDependency<span style=color:#f92672>(</span>havingEntrypointAsOrigin<span style=color:#f92672>,</span> andAnyTarget<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>because<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;`Entrypoint` submodule contains the main method wiring all the adapters together.&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>ensureAllClassesAreContainedInArchitectureIgnoring<span style=color:#f92672>(</span>havingEntrypointAsOrigin<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>withOptionalLayers<span style=color:#f92672>(</span><span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>.</span>check<span style=color:#f92672>(</span>code<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>def</span> havingEntrypointAsOrigin <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>DescribedPredicate</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>.</span>describe<span style=color:#f92672>[</span><span style=color:#66d9ef>JavaClass</span><span style=color:#f92672>](</span><span style=color:#e6db74>&#34;in `entrypoint` package&#34;</span><span style=color:#f92672>,</span> <span style=color:#66d9ef>_</span><span style=color:#f92672>.</span>getPackage<span style=color:#f92672>.</span>getName<span style=color:#f92672>.</span>contains<span style=color:#f92672>(</span><span style=color:#e6db74>&#34;entrypoint&#34;</span><span style=color:#f92672>))</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>private</span> <span style=color:#66d9ef>def</span> andAnyTarget <span style=color:#66d9ef>=</span> <span style=color:#a6e22e>DescribedPredicate</span><span style=color:#f92672>.</span>alwaysTrue<span style=color:#f92672>()</span></span></span></code></pre></div><p>This uses the <code>onionArchitecture</code> rule to enforce the following architectural constraints:</p><ul><li>the <code>domainModels</code> contains all the domain entities and do not depend on any other layer;</li><li>the <code>applicationServices</code> contains all the application services that are needed to run the application and use cases. They can use and see only the domain models and no other layer;</li><li>the <code>adapter</code>s modules contains logic to connect to external systems and/or infrastructure. They can see and use both the domain models and the application services, but no adapter can depend on another one.</li><li>the only exception applies to the <code>entrypoint</code> package that contains the main application entrypoint and, thus, need to see and use the various adapters to wire all up together.</li></ul><h2 id=unit-tests>Unit tests <a href=#unit-tests class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Unit tests, which sit at the lowest level of the testing pyramid, focus on verifying that small pieces of code—often individual classes—behave as expected.</p><p>Leveraging testing DSLs frameworks like <a href=https://kotest.io rel=external target=_blank>Kotest<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> and <a href=http://www.scalatest.org rel=external target=_blank>ScalaTest<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> tests can be crafted in a clear and succinct way, enhancing their comprehensibility and maintenance.</p><h2 id=integration-tests>Integration tests <a href=#integration-tests class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Vale&ndash;</p><p>Requires bring up the single component to test and mock the others&mldr;</p><h2 id=end-to-end-tests>End-to-End tests <a href=#end-to-end-tests class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>End-to-End tests are the heaviest and slowest tests, as they validate the system as a whole, simulating real user interactions and scenarios.</p><p>These tests are placed in the access point of the system, i.e., the API gateway, and to be run against the whole system requires the local deployment of all the services along with a mocked version of the client app to make it possible to test real system notifications and interactions in a controlled and repeatable way.</p><p>For this purpose a local deployment infrastructure has been set up using Docker Compose (more details on the Deployment section) with a custom template resolution strategy to allow the gateway test lifecycle to:</p><ol><li>package in a Docker image the gateway service with the latest changes;</li><li>package the mocked client application in a Docker image;</li><li>bring up all the system microservices along with the gateway and the mocked client application;</li><li>run the end-to-end tests against the system;</li><li>tear down the whole system.</li></ol><p>As presented in the <a href=/docs/2-domain-analysis/1-functional-requirements/>Domain Analysis</a> section, the system has been end-to-end validated and tested using Gherking and Cucumber-JS libraries, along with <a href=https://pptr.dev rel=external target=_blank>Puppeteer<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> for browser automation and interactions.</p><p>An example of a feature implementation is presented hereafter:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>When</span>(<span style=color:#e6db74>&#34;I have arrived at the destination&#34;</span>, <span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#66d9ef>this</span>.<span style=color:#a6e22e>hanWs</span>.<span style=color:#a6e22e>send</span>(
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>sample</span>(<span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>han</span>.<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>astro</span>.<span style=color:#a6e22e>id</span>, <span style=color:#a6e22e>cesenaCampusLocation</span>))
</span></span><span style=display:flex><span>  );
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Then</span>(<span style=color:#e6db74>&#34;the routing is stopped&#34;</span>, { <span style=color:#a6e22e>timeout</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>20_000</span> }, <span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>eventually</span>(<span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>expect</span>(
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>receivedUpdates</span>.<span style=color:#a6e22e>some</span>((<span style=color:#a6e22e>update</span>) =&gt; 
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>update</span>.<span style=color:#a6e22e>UserUpdate</span>.<span style=color:#a6e22e>user</span> <span style=color:#f92672>===</span> <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>han</span>.<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>id</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#a6e22e>update</span>.<span style=color:#a6e22e>UserUpdate</span>.<span style=color:#a6e22e>status</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;Active&#34;</span>
</span></span><span style=display:flex><span>      ),
</span></span><span style=display:flex><span>    ).<span style=color:#a6e22e>to</span>.<span style=color:#a6e22e>be</span>.<span style=color:#66d9ef>true</span>;
</span></span><span style=display:flex><span>  }, <span style=color:#ae81ff>15_000</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>Then</span>(<span style=color:#e6db74>&#34;my state is updated to `Active`&#34;</span>, { <span style=color:#a6e22e>timeout</span><span style=color:#f92672>:</span> <span style=color:#ae81ff>15_000</span> }, <span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>eventually</span>(<span style=color:#66d9ef>async</span> () =&gt; {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>expectSuccessfulGetRequest</span>(
</span></span><span style=display:flex><span>      <span style=color:#e6db74>`/api/session/state/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>astro</span>.<span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>han</span>.<span style=color:#a6e22e>userData</span>.<span style=color:#a6e22e>id</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>global</span>.<span style=color:#a6e22e>han</span>.<span style=color:#a6e22e>token</span>,
</span></span><span style=display:flex><span>      {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>status</span><span style=color:#f92672>:</span> { <span style=color:#a6e22e>code</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;OK&#34;</span> },
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>state</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;ACTIVE&#34;</span>,
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>    );
</span></span><span style=display:flex><span>  }, <span style=color:#ae81ff>10_000</span>);
</span></span><span style=display:flex><span>});</span></span></code></pre></div><p>The full suite of end-to-end features and tests can be found <a href=https://github.com/position-pal/gateway/tree/main/tests/features rel=external target=_blank>here<svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a> and the report of the last run can be found below:</p><iframe src=https://position-pal.github.io/gateway/reports/cucumber-report.html width=100% height=700></iframe><h2 id=stress-test>Stress Test <a href=#stress-test class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>Gio&ndash;</p><h2 id=quality-assurance>Quality Assurance <a href=#quality-assurance class=anchor aria-hidden=true><i class="material-icons align-middle">link</i></a></h2><p>For all the projects and repositories, depending on the language they are developed in, different Quality Assurance (QA) tools have been used to validate the quality of the codebase.
These tools ensure adherence to coding standards, maintainability, and early detection of potential issues, if appropriately integrated into Continuous Integration (as per DevOps best practices).</p><p>The following tools have been used for Scala:</p><ul><li><a href=https://scalameta.org/scalafmt/ rel=external target=_blank><code>Scalafmt</code><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>: a code formatter ensuring consistency in code style across the project;</li><li><a href=http://www.scalafix.org rel=external target=_blank><code>Scalafix</code><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>: a tool for refactoring and linting Scala code, allowing automated fixes for common issues and ensuring best practices.</li></ul><p>The following tools have been employed for Kotlin:</p><ul><li><a href=https://ktlint.github.io rel=external target=_blank><code>ktlint</code><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>: a linter and formatter that enforces Kotlin coding standards automatically;</li><li><a href=https://scalacenter.github.io/scalafix/ rel=external target=_blank><code>detekt</code><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>: a static code analysis tool for Kotlin that helps identify code smells, complexity issues, and potential security risks.</li></ul><p>For Javascript, <a href=https://eslint.org rel=external target=_blank><code>ESLint</code><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="M14 5c-.552.0-1-.448-1-1s.448-1 1-1h6c.552.0 1 .448 1 1v6c0 .552-.448 1-1 1s-1-.448-1-1V6.414l-7.293 7.293c-.391.39-1.024.39-1.414.0-.391-.391-.391-1.024.0-1.414L17.586 5H14zM5 7c-.552.0-1 .448-1 1v11c0 .552.448 1 1 1h11c.552.0 1-.448 1-1v-4.563c0-.552.448-1 1-1s1 .448 1 1V19c0 1.657-1.343 3-3 3H5c-1.657.0-3-1.343-3-3V8c0-1.657 1.343-3 3-3h4.563c.552.0 1 .448 1 1s-.448 1-1 1H5z"/></svg></a>, a static analysis tool that enforces coding style rules and detects problematic patterns in JavaScript code.</p><p>To further improve code quality and reliability, aggressive compilation options have been used across all projects. These options ensure that all warnings are treated as errors, preventing the introduction of potential issues into the codebase. This approach enforces strict compliance with best practices and minimizes the risk of overlooking important warnings that could lead to runtime errors or degraded maintainability.</p><p>By integrating these QA tools and enforcing strict compilation settings, the project maintains high code quality, reduces technical debt, and ensures consistency across different languages and repositories.</p><p>For more details on the QA tools and configuration used please refer to the <a href=/docs/7-devops/devops/>DevOps section</a>.</p></div></div><div><hr class=doc-hr><div id=doc-nav class=d-print-none><div class="row flex-xl-nowrap"><div class="col-sm-6 pt-2 doc-next"><a href=/docs/5-implementation/3-chat-service/><div class="card h-100 my-1"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0"><i class="material-icons align-middle">navigate_before</i> Chat Service implementation details</p></div></div></a></div><div class="col-sm-6 pt-2 doc-prev"><a class=ms-auto href=/docs/7-devops/devops/><div class="card h-100 my-1 text-end"><div class="card-body py-2"><p class="card-title fs-5 fw-semibold lh-base mb-0">DevOps <i class="material-icons align-middle">navigate_next</i></p></div></div></a></div></div></div></div></div></div></div></div><footer class="shadow py-3 d-print-none"><div class=container-fluid><div class="row align-items-center"><div class=col><div class="text-sm-start text-center mx-md-2"><p class=mb-0></p></div></div></div></div></footer></main></div></div><button onclick=topFunction() id=back-to-top aria-label="Back to Top Button" class="back-to-top fs-5"><svg width="24" height="24"><path d="M12 10.224l-6.3 6.3-1.38-1.372L12 7.472l7.68 7.68-1.38 1.376z" style="fill:#fff"/></svg></button>
<script>(()=>{var e=document.getElementById("mode");e!==null&&(window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{e.matches?(localStorage.setItem("theme","dark"),document.documentElement.setAttribute("data-dark-mode","")):(localStorage.setItem("theme","light"),document.documentElement.removeAttribute("data-dark-mode"))}),e.addEventListener("click",()=>{document.documentElement.toggleAttribute("data-dark-mode"),localStorage.setItem("theme",document.documentElement.hasAttribute("data-dark-mode")?"dark":"light")}),localStorage.getItem("theme")==="dark"?document.documentElement.setAttribute("data-dark-mode",""):document.documentElement.removeAttribute("data-dark-mode"))})()</script><script src=/docs/js/bootstrap.eac7ee3f6fa791c684e7a51fc2fd50b6f724271b9e39562e4fe8c3942412df3acbfc4045f043d03399dac70091207507.js integrity=sha384-6sfuP2+nkcaE56Ufwv1QtvckJxueOVYuT+jDlCQS3zrL/EBF8EPQM5naxwCRIHUH defer></script><script type=text/javascript src=https://position-pal.github.io/docs/js/bundle.min.4b07706b1da436c9600e641a8cf51af20b3e497ead85e0d0af7552a0314e8e317dc63bb69d12c072092518621478900d.js integrity=sha384-Swdwax2kNslgDmQajPUa8gs+SX6theDQr3VSoDFOjjF9xju2nRLAcgklGGIUeJAN crossorigin=anonymous defer></script><script type=module>
    var suggestions = document.getElementById('suggestions');
    var search = document.getElementById('flexsearch');

    const flexsearchContainer = document.getElementById('FlexSearchCollapse');

    const hideFlexsearchBtn = document.getElementById('hideFlexsearch');

    const configObject = { toggle: false }
    const flexsearchContainerCollapse = new Collapse(flexsearchContainer, configObject) 

    if (search !== null) {
        document.addEventListener('keydown', inputFocus);
        flexsearchContainer.addEventListener('shown.bs.collapse', function () {
            search.focus();
        });
        
        var topHeader = document.getElementById("top-header");
        document.addEventListener('click', function(elem) {
            if (!flexsearchContainer.contains(elem.target) && !topHeader.contains(elem.target))
                flexsearchContainerCollapse.hide();
        });
    }

    hideFlexsearchBtn.addEventListener('click', () =>{
        flexsearchContainerCollapse.hide()
    })

    function inputFocus(e) {
        if (e.ctrlKey && e.key === '/') {
            e.preventDefault();
            flexsearchContainerCollapse.toggle();
        }
        if (e.key === 'Escape' ) {
            search.blur();
            
            flexsearchContainerCollapse.hide();
        }
    };

    document.addEventListener('click', function(event) {

    var isClickInsideElement = suggestions.contains(event.target);

    if (!isClickInsideElement) {
        suggestions.classList.add('d-none');
    }

    });

    


    document.addEventListener('keydown',suggestionFocus);

    function suggestionFocus(e) {
    const suggestionsHidden = suggestions.classList.contains('d-none');
    if (suggestionsHidden) return;

    const focusableSuggestions= [...suggestions.querySelectorAll('a')];
    if (focusableSuggestions.length === 0) return;

    const index = focusableSuggestions.indexOf(document.activeElement);

    if (e.key === "ArrowUp") {
        e.preventDefault();
        const nextIndex = index > 0 ? index - 1 : 0;
        focusableSuggestions[nextIndex].focus();
    }
    else if (e.key === "ArrowDown") {
        e.preventDefault();
        const nextIndex= index + 1 < focusableSuggestions.length ? index + 1 : index;
        focusableSuggestions[nextIndex].focus();
    }

    }

    


    (function(){

    var index = new FlexSearch.Document({
        
        tokenize: "forward",
        minlength:  0 ,
        cache:  100 ,
        optimize:  true ,
        document: {
        id: 'id',
        store: [
            "href", "title", "description"
        ],
        index: ["title", "description", "content"]
        }
    });


    


    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    


    

    

    index.add(
            {
                id:  0 ,
                href: "\/docs\/1-introduction\/introduction\/",
                title: "Introduction",
                description: "What, Why, and How",
                content: "\nWhat is PositionPal? linkPositionPal is a micro-services-based application for creating groups of trusted users with whom to share location, routes, and notify of dangerous or emergency situation to create an effective and timely service and support network.\nThe idea comes from some news read recently about young people who, on their way home at night in unsafe areas of the city, share their location in a WhatsApp group of users to support and watch each other.\nThe Problem linkPersonal safety concerns are increasingly significant in urban environments, especially for those traveling alone at night or through unfamiliar areas. While general-purpose messaging apps like WhatsApp allow basic location sharing, they lack specialized safety features and automation that could make the difference in emergency situations.\nOur Solution linkPositionPal transforms the ad-hoc “text when you get home” practice into a comprehensive safety system with features specifically designed for personal security:\nTrusted Groups: Create circles of trusted friends, family members, or colleagues Real-time Location Sharing: Share your precise location with selected groups Route Tracking: Set expected routes and arrival times Automated Alerts: Generate notifications when deviating from planned routes or not reaching destinations on time Emergency Notifications: Quick access to alert trusted contacts in dangerous situations Privacy Controls: Fine-grained permissions for when and with whom your location is shared Getting Started linkThe following sections will guide you through the setup, architecture, and usage of PositionPal, demonstrating how it can become an essential tool in your personal safety toolkit.\n"
            }
        );
    index.add(
            {
                id:  1 ,
                href: "\/docs\/2-domain-analysis\/",
                title: "Domain Analysis",
                description: "Knowledge crunching",
                content: ""
            }
        );
    index.add(
            {
                id:  2 ,
                href: "\/docs\/2-domain-analysis\/1-functional-requirements\/",
                title: "Functional Requirements",
                description: "In this section are collected the functional requirements of the system in the form of User Stories.\nUser Stories linkUsers Management link As a new user I want to register with the system using my details So that I can access the application’s features\nAs a registered user I want to log in with my credentials So that I can access my account and use the application\nAs a logged user I want to update my profile information So that I can keep my personal details current\n",
                content: "In this section are collected the functional requirements of the system in the form of User Stories.\nUser Stories linkUsers Management link As a new user I want to register with the system using my details So that I can access the application’s features\nAs a registered user I want to log in with my credentials So that I can access my account and use the application\nAs a logged user I want to update my profile information So that I can keep my personal details current\nAs a logged user I want to delete my profile So that I can remove my data from the system when I no longer wish to use it\nTODO: missing groups\nLocation tracking link As a logged user I want to be able to start sharing my location with other groups’ member So that I’m able to be monitored\nAs a logged user who is sharing their position with a set of groups I want to be able to stop sharing it with a group’s members So that I can go where I want without letting know those member\nAs a logged user I want to be able to receive location updates from my groups’ members who are sharing their location So that I can view their live location on a map in real-time\nAs a logged user I want to be able to get the last known location and state of my groups’ member So that I can see their last reported location and status when live sharing is unavailable\nAs a logged user I want to be able to send an SOS alert comprising of my location to all members of all groups I’m participating despite the fact I’m or not sharing my location So that if I am in a dangerous situation my friends are notified and knows where I am\nAs a logged user I want to start sharing my location to all groups’ members after the trigger of an SOS alert So that my live location is automatically shared after an SOS alert to aid responders\nAs a logged user who is sharing their position I want to be able to share a journey towards a location specifying the time by which I’ll be there So that my friends know where I’m going\nAs a logged user who is sharing a journey I want to be able to trigger an SOS alert So that if I am in a dangerous situation my friends are notified\nAs a logged user in SOS mode I want to be able to stop the SOS So that my friend are notified I’m not anymore in danger\nAs a logged user who is sharing a journey I want to be able to stop it prematurely So that my friend knows a change in my plan have occurred\nAs a logged user I want to be able to see the entire path taken by my groups’ members who are sharing a journey or triggered an SOS alert So that I know where they have been during the dangerous situation\nAs a logged user I want to be able to receive a notification when one of my groups’ member start a journey or trigger an SOS alert So that I’m aware of it\nAs a logged user I want to be able to receive a notification if one my groups’ member who triggered an SOS alert goes offline or deactivate it So that I can take appropriate action\nAs a logged user I want to be able to receive a notification if one my groups’ member who started a journey stops moving, doesn’t arrive on time, goes offline, reaches their destination or deactivate it So that I can take appropriate action\nChat linkAcceptance tests linkFollowing BDD principles, starting from the above user stories, a set of acceptance test specifications have been defined. These specifications are written in Gherkin using Cucumber, providing a structured and human-readable format that facilitates communication between stakeholders, even for those who have not a technical background. Moreover, they serve end-to-end tests, ensuring that the system meets the defined requirements while aligning with end users’ expectations and needs (see the Validation section for more details about tests). By leveraging this approach, the tests remain clear, maintainable, and closely tied to business objectives.\nUser Management link Scenario: Register a New User Given that the user is not yet registered When registering with valid details Then the system successfully registers the user Scenario: Login with Valid Credentials Given logged user with the correct email and password When system returns a valid authentication token Then authentication token can be use to authorize requests Scenario: Update User Profile Given new user logged in When updating the profile information Then the system successfully updates the user data When requesting the deletion of the user profile Then the system deletes the user data and confirms the deletion Location tracking link Feature: Users real-time tracking Background: Given I am a logged user * with a registered device And I am in a group with other users Scenario: User can track other users in their groups in real-time When I access my group tracking information Then I should see the real-time location of online group members And the last known location of offline group members Scenario: User is able to share their location with other group members When I start sharing my location Then my last known location should be updated And my state should be `Active` Scenario: User can stop sharing their location with other group members When I stop sharing my location with that group Then the group's members should not see my location anymore * my state should be updated to `Inactive` But my last known location should still be available Feature: Users routes tracking Background: Given I am a logged user * with a registered device And I am in a group with other users Scenario: User can activate a route that is recorded and visible to group members When I activate the routing mode indicating a destination and the ETA Then my state is updated to `Routing` * my group's members receive a notification indicating I've started a routing And my group's members can see the route I've been taken since activating routing mode Scenario Outline: A route can be stopped Given I'm in routing mode When Then the routing is stopped * the route discarded * my state is updated to `Active` And my group's members receive a notification indicating Examples: | event | | I have arrived at the destination | | I have stopped the routing | Scenario Outline: Route notifications Given I'm in routing mode When Then my group's members receive a notification indicating Examples: | event | | I have gone offline | | I have not arrived by the estimated time | | I have been stuck in the same position for a while | "
            }
        );
    index.add(
            {
                id:  3 ,
                href: "\/docs\/2-domain-analysis\/2-business-requirements\/",
                title: "Business Requirements",
                description: "Glossary link??\nUse cases linkLocation Tracking link Start Location Sharing\nActor: Group member Description: The user starts sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to share their location with. Main Scenario: The user selects the group they want to share their location with; The user starts sharing their location with members of that group; A visual feedback is sent to the user notifying them the location sharing has started. Postcondition: The user’s location is shared with the selected group members. Stop Location Sharing\n",
                content: "Glossary link??\nUse cases linkLocation Tracking link Start Location Sharing\nActor: Group member Description: The user starts sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to share their location with. Main Scenario: The user selects the group they want to share their location with; The user starts sharing their location with members of that group; A visual feedback is sent to the user notifying them the location sharing has started. Postcondition: The user’s location is shared with the selected group members. Stop Location Sharing\nActor: Group member Description: The user stops sharing their location with members of one or more groups. Preconditions: The user is logged and is a member of the group they want to stop sharing their location with; The user is currently sharing their location. Main Scenario: The user selects the group they want to stop sharing their location with; The user stops sharing their location; A visual feedback is sent to the user notifying them the location sharing has been turned off; Postcondition: The user’s location is no longer shared with the selected group members. Send a GPS Location Update\nActor: Group member Description: The user sends a GPS location update to the system for a specific set of groups. Preconditions: The user is logged and is a member of the group they want to send the location to; Main Scenario: The user sends a GPS location update; The system updates the user’s location. Alternative Scenario: The user have triggered the SOS The user sends a GPS location update; The system updates the user’s location and their path in SOS mode. Alternative Scenario: The user is sharing a journey. The user sends a GPS location update; The system updates the user’s location and the path of the journey; The system verify if the user have reached the destination. If so, stops the journey sharing, otherwise it continues; The system verify if the user is stuck or the ETA is elapsed. If so, trigger a notification for all group members. Postcondition: The user’s location is updated server-side and their state is ‘Active’. View Real-time Group Members’ Locations and State on a Map\nActor: Group member Description: The user views the real-time locations and state of group members on a map. Preconditions: The user is logged and is a member of the group they want to view. Main Scenario: The user selects the group they want to view; The user views the real-time locations and state of all group members on a map. Trigger SOS Alert\nActor: Group member description: The user triggers an SOS alert because they are in danger. Preconditions: The user is logged and is part of at least one group; The user is not already in SOS mode. Main Scenario: The user triggers the SOS alert; The system updates the user’s location and enters SOS mode, starting recording their path; The system sends a notification to all group members. Postcondition: The user is in ‘SOS’ mode. Stop SOS Mode\nActor: Group member Description: The user stops the SOS mode. Preconditions: The user is logged and is part of at least one group; The user is in SOS mode. Main Scenario: The user stops the SOS mode; The system stops recording the user’s path; The system sends a notification to all group members; Postcondition: The user is no longer in ‘SOS’ mode, but in ‘Active’ mode. Share a Journey\nActor: Group member description: The user start sharing a journey with a group; Preconditions: The user is logged and is part of the group they want to share the journey with; The user is not sharing a journey. Main Scenario: The user selects the group they want to share the journey with; The user starts sharing the journey by choosing the destination and the estimated time of arrival; The system sends a notification to all group members. Postcondition: The user is sharing the journey and their state is ‘Routing’. Stop Journey Sharing\nActor: Group member Description: The user stops sharing the journey. Preconditions: The user is logged and is part of the group they want to stop sharing the journey with; The user is sharing a journey. Main Scenario: The user selects the group they want to stop sharing the journey with; The user stops sharing the journey; The system sends a notification to all group members that the journey sharing has been stopped. Postcondition: The user is no longer sharing the journey and their state is ‘Active’. View Path of a Group Member on a Journey or in SOS Mode\nActor: Group member Description: The user views the path of a group member on a journey or in SOS mode. Preconditions: The user is logged and is part of the group they want to view the path of a group member; Main Scenario: The user selects the group they want to view the path of a group member; The user selects the group member they want to view the path of; The user views the path of the selected group member on a map. Postcondition: The user has viewed the path of the selected group member. "
            }
        );
    index.add(
            {
                id:  4 ,
                href: "\/docs\/2-domain-analysis\/3-quality-attributes\/",
                title: "Quality Attributes",
                description: "Quality Attributes (QA), also known as Non-Functional Requirements (NFR), are measurable properties of a system that describe its qualities and indicate how well it satisfies the needs of its stakeholders beyond the functional requirements.\nThese attributes play a crucial role in shaping the system architecture, as they influence design decisions, trade-offs, and the selection of appropriate technologies and patterns.\nIn the context of this project have been identified the following quality attributes that are considered essential for the success of system, divided into “Runtime” and “Development Time” categories:\n",
                content: "Quality Attributes (QA), also known as Non-Functional Requirements (NFR), are measurable properties of a system that describe its qualities and indicate how well it satisfies the needs of its stakeholders beyond the functional requirements.\nThese attributes play a crucial role in shaping the system architecture, as they influence design decisions, trade-offs, and the selection of appropriate technologies and patterns.\nIn the context of this project have been identified the following quality attributes that are considered essential for the success of system, divided into “Runtime” and “Development Time” categories:\nRuntime the system should be highly available and reliable to ensure users can access it when needed the system should be scalable to handle a growing number of users and data the system should be performant to provide a responsive user experience and minimize latency in critical operations the system should be secure to protect users’ data and privacy the system should be observable to allow monitoring and troubleshooting of its components in real-time the client application should be user-friendly to provide an intuitive and accessible interface for users to interact with the system Development Time the system should be testable to ensure the correctness of its behavior and facilitate maintenance over time; the system should be modular to allow independent development and streamlined deployment of its components; the system should be extensible to support future enhancements and integrations with other services without major refactoring or disruptions; the system should be maintainable to allow easy updates, bug fixes, and improvements over time without excessive effort or risk of regressions. Based on the above non-functional requirements, the team has identified the following scenarios to be considered during the design and implementation of the system.\nQuality Attributes Scenarios linkRuntime linkVale–\nSecurity\nPerformance\nUser friendliness\nObservability linkStimulus: On or more services in the system is not responding as expected. Stimulus Source: Monitoring service detect and report the anomaly. Environment: The system operating in normal state in a production enviroment. Artifact: The monitoring service. Response: The monitoring service logs the anomaly and sends an alert to the system administrator. Response Measure: - ✅ Pass Condition: The system administrator receives the alert in less than 1 minute. - ✅ Pass Condition: The alert contains the service name, the error message, and the timestamp of the anomaly. - ✅ Pass Condition: The alert is sent to the system administrator via email, a messaging service, or a dedicated monitoring platform. - ✅ Pass Condition: The alert is logged in the monitoring system for future reference.\nReliability linkStimulus: An error occours in one of the system services. Stimulus Source: An exception (of any nature) throwed inside a service program. Environment: The system operating in normal state in a production enviroment. Artifact: The affected service(s). Response: The infrastructure of the system automatically detects the failure and tries to restore the affected service(s), ensuring that no data is lost or corrupted. Response Measure: The service(s) returns to operate normally if they can be restored, otherwise they will be replaced by a new operational instance. - ✅ Pass Condition: The system is able to restore the service(s) within 30 seconds.\nAvailability linkStimulus: Due an internal error occours, a service becomes unavailable. Stimulus Source: Hardware or network error. Environment: The system operating in normal state in a production enviroment. Artifact: The service that becomes unavailable. Response: The infrastructure of the system automatically detects the failure and tries to redirect the trafic in another replica if this is available, otherwise an error is reported to the monitoring system. Response Measure: - ✅ Pass Condition: The system is able to redirect the trafic to another replica within 1 minute.\nScalability linkStimulus: An huge amount of requests are performed to one or more services in the system. Stimulus Source: Users that tries to access the system. Environment: The system operating on an high load in a production enviroment. Artifact: Services of the system with huge amount of requests registered. Response: The infrastructure that hosts the system will automatically create new replicas of the services that are under high load, and will redirect the trafic to the new replicas. Response Measure: - ✅ Pass Condition: System is able to serve all the requests with a response time of less than 3.5 second on the 98% of the requests.\nDevelopment Time linkTestability link Source: Developer Stimulus: A new code change is submitted to the version control system Environment: In a controlled CI/CD pipeline with automated testing tools and environments set up Artifact: System modules and components Response: The system triggers all the automated test suite, comprising unit, integration, and end-to-end tests, to verify the correctness of the changes Response Measure: ✅ Pass Condition: All tests pass successfully withing 15 minutes ✅ Pass Condition: The test report must clearly indicate the tests report and any failed tests, including module name, error details and stack trace Modularity link Source: Development team Stimulus: A request is made to update, fix, or replace an existing module or component due to a bug fix, performance improvement, or internal refactoring. Environment: The system is operational and new code changes are being developed and tested in a controlled environment with all modules integrated Artifact: The specific component or module targeted for update or replacement Response: The requested module can be replaced or updated independently, using only its exposed APIs, without modifying or recompiling other modules. Response Measure: ✅ Pass Condition: Integration of the updated or new module must not require changes to other modules. ✅ Pass Condition: Integration testing must be completed within 20% of the original development effort for the module. ✅ Pass Condition: All tests for unchanged modules must pass after integration. Extensibility link Source: Product manager Stimulus: A request is made to add a new feature or integrate an external service that does not exist in the current system. Environment: During development, with the system operational for existing services, leveraging defined extension points or APIs. Artifact: New module or service to be integrated, extension points, and system interfaces. Response: The new feature must be implemented as a separate module using a clear and well-defined API, minimizing changes to existing code. The integration should not impact the performance or functionality of existing modules. Response Measure: ✅ Pass Condition: No more than 10% of the existing code can be modified to support the new module. ✅ Pass Condition: The new module must pass all tests independently before integration. ✅ Pass Condition: Integration must not degrade existing system performance by more than 5%. Maintainability link Source: Development team Stimulus: A bug is reported in a deployed module. Environment: In a controlled development environment with access to the source code, bug tracking system, and deployment tools. Artifact: System logs, bug report, and source code repository Response: The development team isolates the issue, applies a fix, and deploys it without affecting other modules. Response Measure: ✅ Pass Condition: No new regression failures are detected in automated tests post-deployment. "
            }
        );
    index.add(
            {
                id:  5 ,
                href: "\/docs\/2-domain-analysis\/4-event-storming\/",
                title: "Event Storming",
                description: "In order to extract the main functionality of the application as quickly and effectively as possible, Event Storming, a collaborative and visual modeling technique particularly used and valued in the agile and Domain-Driven development context, was used.\nIts power comes from a heterogeneous, multidisciplinary group of experts, from architects to product owners, via UI/UX designers to testers, who, together, collaborate to extract key features and the processes that drive them, sharing this knowledge so that it is shared beyond the compartments of each team. Moreover, this approach allows for uniformity in the language used (the ubiquitous language) and for raising and then resolving any ambiguities or misunderstandings that may arise early in the project.\n",
                content: "In order to extract the main functionality of the application as quickly and effectively as possible, Event Storming, a collaborative and visual modeling technique particularly used and valued in the agile and Domain-Driven development context, was used.\nIts power comes from a heterogeneous, multidisciplinary group of experts, from architects to product owners, via UI/UX designers to testers, who, together, collaborate to extract key features and the processes that drive them, sharing this knowledge so that it is shared beyond the compartments of each team. Moreover, this approach allows for uniformity in the language used (the ubiquitous language) and for raising and then resolving any ambiguities or misunderstandings that may arise early in the project.\nIt starts with a problem or objective and, through the use of colored stickynotes and markers, proceeds to map the processes and interactions between the various entities involved so as to obtain an overview of the system and its interactions. In more detail, the session begins with the identification of the domain events, that is, events related to the domain being explored that represent something interesting that has happened (past tense is used for this) and that may be useful for the system. These are arranged in temporal sequence so as to create a timeline representing the flow of events occurring in the system. This is followed by the identification of commands, i.e., actions that can be performed on the system by an actor, and policies by which the system reacts, going on to enrich the timeline by following the flow of events and actions. Finally, read models, or whatever information the system needs to show the user, are highlighted.\nGlossary:\nSticky note color Concept Description 🟨 Actor Person/user/personas. The actor who triggered the event / comamnd. 🟧 Domain Event An event that is interesting for the business. 🟦 Command An action that can be performed on the system. 🟪 Policy Capture reactive logic to events. 🟩 Read Model Information that the system needs to show the user. View details. 🏻 System An internal or external component of the application. 🟥 Hotspot An internal system constraint / some important note. As a result of the event storming session, the main core entities and aggregates of the system were identified and from those the bounded contexts were derived:\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e "
            }
        );
    index.add(
            {
                id:  6 ,
                href: "\/docs\/3-arch-design\/",
                title: "Architectural Design",
                description: "Architectural design of the system.",
                content: ""
            }
        );
    index.add(
            {
                id:  7 ,
                href: "\/docs\/3-arch-design\/1-bounded-contexts\/",
                title: "Bounded Contexts",
                description: "Following the event storming session, the subsequent bounded contexts have been identified:\nUsers Management: it is responsible for managing the users’ lifecycle, from registration to deletion and the management of their profile information along with the authentication and authorization. Groups Management: it is responsible for managing the groups’ lifecycle, from creation to deletion, and the management of the group’s members. Location Tracking: it is responsible for managing the location tracking of the users, including the sharing of the location with groups’ members, the reception of location updates, thw sending of SOS alerts and the management of their paths. Notifications: it is responsible for managing the notifications, including the push notifications to the users’ devices. Chat: it is responsible for managing the chat between the users and the groups’ members. In the following sections, we will provide a detailed view of each bounded context, including its Ubiquitous Language, the Commands and the Events guiding the interactions between the different contexts. These can be categorized as Driving or Driven Events: the former are the events triggered by the user’s actions and that drives an application use case, while the latter are the events that are triggered by the system as a reaction to a use case or a system state change. Moreover we distinguish between Commands and Events to highlight the difference between a request to perform an action (Command) and the notification of something meaningful that has happened (Event):\n",
                content: "Following the event storming session, the subsequent bounded contexts have been identified:\nUsers Management: it is responsible for managing the users’ lifecycle, from registration to deletion and the management of their profile information along with the authentication and authorization. Groups Management: it is responsible for managing the groups’ lifecycle, from creation to deletion, and the management of the group’s members. Location Tracking: it is responsible for managing the location tracking of the users, including the sharing of the location with groups’ members, the reception of location updates, thw sending of SOS alerts and the management of their paths. Notifications: it is responsible for managing the notifications, including the push notifications to the users’ devices. Chat: it is responsible for managing the chat between the users and the groups’ members. In the following sections, we will provide a detailed view of each bounded context, including its Ubiquitous Language, the Commands and the Events guiding the interactions between the different contexts. These can be categorized as Driving or Driven Events: the former are the events triggered by the user’s actions and that drives an application use case, while the latter are the events that are triggered by the system as a reaction to a use case or a system state change. Moreover we distinguish between Commands and Events to highlight the difference between a request to perform an action (Command) and the notification of something meaningful that has happened (Event):\nUsers Management linkUbiquitous Language linkEvents linkGroups Management linkUbiquitous Language linkEvents linkLocation Tracking linkUbiquitous Language link Concept Description Synonyms Location A specific point on a geographical plane, represented by coordinates that indicates where something / someone is located. Position Address A human-readable description of a location, usually including the street name, the city, the country, and the postal code along with the related location. ETA Estimated Time of Arrival, the time at which a user is expected to reach a certain destination. Route A set of positions that can be interpolated forming a path between two geographical positions. Path Tracking Represent the user route information at a certain point in time. State State of a user at a certain time, the values that it could assume are: online, offline, SOS, Routing, Warning. Session An aggregation of the user’s tracking information, the state and last location of a user in a certain period of time. Events link 🏷️ Event Type Event Name Description 🚀 Driving event SampledLocation The event sent from the client application to update the user’s location. RoutingStarted The event sent from the client application to start the user’s route tracking towards a destination. RoutingStopped The event sent from the client application to stop the user’s route tracking. SOSAlertTriggered The event sent from the client application to trigger an SOS alert, carrying the user’s location. SOSAlertStopped The event sent from the client application to stop the SOS alert. 📥 Driven event UserUpdate The event sent from the Location Service to notify the client application about the user’s state or location update. Notifications linkUbiquitous Language link Concept Description Synonyms Push notification A real-time message sent to a user’s device to inform about a relevant event. Notification message The actual content of the push notification that is displayed to the user. Registration token A unique token associated with a user’s device for sending push notifications. Token, Device Token Commands link Command Description Group Wise Push Notification A push notification to be sent to all the members of a group. Co Members Push Notification A push notification to be sent to all users sharing at least one group with a specific user. Chat linkUbiquitous Language linkEvents linkBounded Context Integration linkThe boundary of each bounded context delineates the scope of the context: models in different bounded context can be evolved and implemented independently, but they need to be integrated to provide a coherent service to the users.\nDDD provides a set of patterns for defining relationship and integrations between bounded contexts to be reified in the so-called Context Map, a visual representation of the system’s bounded contexts and the relationships between them.\nThe following diagram shows the context map of the PositionPal system:\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e "
            }
        );
    index.add(
            {
                id:  8 ,
                href: "\/docs\/3-arch-design\/2-architecture-design\/",
                title: "Architecture Design",
                description: "The chosen architectural style for the system is the Microservices Architecture.\nTODO: why, advantages\nMicroservices Decomposition linkFollowing the decompose by subdomain strategy the following microservices have been identified:\nUser Service: responsible for managing the user account data and the groups of the system; Location Service: responsible for managing the location and the user tracking; Notification Service: responsible for managing the notifications; Chat Service: responsible for managing the chat messages. It should be noted that in the User Service we have joined together the Users and Groups bounded context. This is because one can see the close interaction between these two domain entities in addition to respecting properties such as the “Common Closure Principle” (package components that change for the same reason are located into the same service), ensuring data consistency and mitigate Network latency:\n",
                content: "The chosen architectural style for the system is the Microservices Architecture.\nTODO: why, advantages\nMicroservices Decomposition linkFollowing the decompose by subdomain strategy the following microservices have been identified:\nUser Service: responsible for managing the user account data and the groups of the system; Location Service: responsible for managing the location and the user tracking; Notification Service: responsible for managing the notifications; Chat Service: responsible for managing the chat messages. It should be noted that in the User Service we have joined together the Users and Groups bounded context. This is because one can see the close interaction between these two domain entities in addition to respecting properties such as the “Common Closure Principle” (package components that change for the same reason are located into the same service), ensuring data consistency and mitigate Network latency:\nMoreover, to aggregate the functionalities of the different microservices, we have chosen to use the API Gateway pattern. This pattern is used to aggregate the functionalities of the architecture, providing a single entry point for the client applications. The API Gateway is responsible for routing the requests to the appropriate service, aggregating the responses, and providing a unified interface to the client applications.\nArchitecture Documentation linkHigh-Level Overview linkTo address the challenges of scalability, decoupling, and real-time processing, the system’s architecture was designed following an event-driven microservice approach, in which the microservices are mainly designed to interact by means of event streams.\nThis paradigm enables asynchronous communication between the services, allowing them to be loosely coupled and independent from each other, hence making the system more resilient and maintainable.\nFor this purpose, the architecture is designed around a Message/Event Broker, which acts as a central communication hub for the microservices, enabling them to publish and subscribe to events, and exchange messages in a reliable and scalable way.\nNonetheless, regarding the communications between the client and the microservices through the API Gateway, an RPC protocol is used, in order to ensure synchronous communication. This approach enables the client to invoke remote procedures on the microservices and receive a response in a synchronous manner (e.g. for the authentication process).\nLastly, each microservice follow the best practice of having its own database, ensuring data isolation and independence from other services, allowing a loosely coupled architecture whose communications happen only through the message broker via a standard protocol. This has also the advantage of letting the developers change a service’s schema without affecting, and thus coordinating, with other services teams.\nFollowing these high-level principles, in the following sections we provide a detailed view of the system’s architecture, though the three main strucutural views: Components and Connectors, Modules and Allocation.\nC\u0026C View linkThe following diagrams shows the Component and Connector (C\u0026C) view of the system, providing a high-level picture of the system’s runtime entities in action and their boundaries.\nIn order to avoid overwhelming the reader with an all-encompassing but rather confusing scheme, we provide below a C\u0026C view of the system by providing, for each microservice, its relative UML diagram.\nLocation Service link Notification service link Deployment View linkHexagonal Architecture linkIn compliance with DDD principles, the microservices are designed following the Hexagonal Architecture pattern (also known as Ports and Adapters or Onion Architecture), which is a particular instantiation of the layered architecture, that is well-suited for microservices to preserve models’ integrity. Indeed, the primary advantage of this pattern is the separation of concerns, which allows the business logic to be decoupled from the infrastructure and the external systems (e.g., databases, message brokers, etc.) hence making the system more maintainable and testable, and the business logic more reusable.\nEach layer of the Hexagonal Architecture has been enforced in the code by mapping them into modules (like Grade submodules) each of which with its own build dependencies and responsibilities, as shown in the following diagram:\n"
            }
        );
    index.add(
            {
                id:  9 ,
                href: "\/docs\/3-arch-design\/4-patterns\/",
                title: "Architectural Patterns",
                description: "API Gateway linkEvent Sourcing linkJSON Web Token (JWT) linkCQRS forse? linkDeployment? link",
                content: "API Gateway linkEvent Sourcing linkJSON Web Token (JWT) linkCQRS forse? linkDeployment? link"
            }
        );
    index.add(
            {
                id:  10 ,
                href: "\/docs\/4-detailed-design\/",
                title: "Detailed Design",
                description: "The detailed design of the system.",
                content: ""
            }
        );
    index.add(
            {
                id:  11 ,
                href: "\/docs\/4-detailed-design\/1-shared-kernel\/",
                title: "Shared Kernel design",
                description: "Structure link ",
                content: "Structure link "
            }
        );
    index.add(
            {
                id:  12 ,
                href: "\/docs\/4-detailed-design\/2-location-service\/",
                title: "Location Service design",
                description: " In this chapter, we present the abstract design of the Location Service. As per best practices, the design is based on the Domain-Driven Design principles, and is presented in terms of the main three views: structure, interaction, and behavior.\nAbstract Design linkStructure linkThe main domain concepts and events are presented hereafter and reified in the following classes structure, following the DDD building blocks.\n",
                content: " In this chapter, we present the abstract design of the Location Service. As per best practices, the design is based on the Domain-Driven Design principles, and is presented in terms of the main three views: structure, interaction, and behavior.\nAbstract Design linkStructure linkThe main domain concepts and events are presented hereafter and reified in the following classes structure, following the DDD building blocks.\nScope: A value object representing the context in which an event occurs. It is composed of a user and a group, capturing the idea that a user’s state can differ from group to group, enabling group-specific visibility and tracking. Tracking: An entity representing the user’s route information at a certain point in time, it is composed of a list of positions that can be interpolated to form a path between two geographical positions. MonitorableTracking: a specialized Tracking entity that includes the mode of transportation, the destination, the expected arrival time, enabling the system to monitor the user’s route and trigger alerts when necessary. Session: An aggregate root entity storing the overall state of a user in a group at a certain point in time. It acts as a state machine, updating the state and the tracking information based on the received events, ensuring the consistency of the user’s state is maintained. A Snapshot is a value object capturing a snapshot of the user’s state. DomainEvent: An interface representing the base structure of a domain event, capturing the timestamp, the user, and the group in which the event occurs. It is the base type for all the events that occur in the system. DrivingEvent: An interface representing the base structure of a driving event, i.e. a valuable event guiding an application use case. ClientDrivingEvent: A specialized DrivingEvent interface representing the events that are triggered by the user’s actions, such as sampling the location, triggering an SOS alert, starting or stopping a routing. InternalDrivingEvent: A specialized DrivingEvent interface representing the events that are triggered by the system, such as the user going offline, triggering a stuck alert, or a timeout alert. DrivenEvent: An interface representing the base structure of a driven event, i.e. an event triggered by the system as a result of some system state change / action. The application services and repositories are presented in the following diagram, which presents only the main interfaces, leaving out the implementation and the adapters classes.\nMapsService: the service responsible for calculating the distance and the duration between two geographical positions, based on the mode of transportation. NotificationService: the service responsible for sending notifications, acting as a proxy towards the notification service. The concrete adapter is in charge of sending the notification to the appropriate channel of the message broker. RealTimeTracking: the service responsible for handling the driving events, acting as an input port for the external adapters. It allows to register observers to be get back real-time updates. Clients can in any moment get a snapshot of the user’s state and location by querying the UsersSessionService service, which is responsible for managing the user’s session state. The actual tracking information are stored through the UserSessionStore repository, which is responsible for the persistence of the user’s session state. A UserSessionStore is both a Writer and a Reader for the Session entity. Separate write-side and read-side interfaces are defined to ensure the separation of concerns and the single responsibility principle, leaving the implementation open to adhere to CQRS pattern. UserGroupsService is responsible for managing the saving and retrieval of the groups members through the UserGroupsStore repository. Updates happen thanks the events propagated by the User service. Interaction linkThe interaction between the main components of the system is described in the following sequence diagram.\nThe Group Member connects to the RealTimeTracking service through a Real Time Communication Connector starting observing the updates of the group members it belongs to. However, before starting reacting to these updates, it fetches the current state of all group members through the UsersSessionService service, ensuring a consistent view of their state. Once the current state of all members is obtained, it starts reacting to the updates of other groups members while sending its own updates to the service. The RealTimeTracking service, upon receiving the updates, reacts to the events and updates the user’s session state, sending back the result to all the group members currently observing group’s changes.\nPlease, note the diagram illustrates only the main success flow, leaving out the error handling and the edge cases.\nBehavior linkAs an event driven architecture, the state of each group’s member can be described by the following state diagram, drawing the possible state transitions that can be fired by one of the above DrivingEvent.\n"
            }
        );
    index.add(
            {
                id:  13 ,
                href: "\/docs\/4-detailed-design\/4-chat-service\/",
                title: "Chat Service design",
                description: "Chat service is responsible for managing the communication between users in real-time. This document describes the detailed design of the chat service, including its architecture, components, and interactions.\nAbstract Design linkHere are presented the main components of the chat service, we start describing the foundamental entities of the domain, then we move to the infrastructure layer, where we define the commands and events that will be used to interact with the domain entities.\n",
                content: "Chat service is responsible for managing the communication between users in real-time. This document describes the detailed design of the chat service, including its architecture, components, and interactions.\nAbstract Design linkHere are presented the main components of the chat service, we start describing the foundamental entities of the domain, then we move to the infrastructure layer, where we define the commands and events that will be used to interact with the domain entities.\nStructure link Client: An entity that represents a user connected to the chat service. It has an identifier, a status, and a reference to the output channel. ClientID: A value object that represents the unique identifier of a client that connects to the chat service. This is a 1-1 mapping to the user identifier used in the shared kernel.\nOutputReference: A value object that represents the reference to the output channel of a client. This reference is used to send messages to the client.\nGroup: An entity that represents a group of clients that can communicate with each other. It has an identifier and a list of clients. GroupID: A value object that represents the identifier of a group. This is a 1-1 mapping to the group identifier used in the shared kernel. ClientMessage: An entity that represents a message sent by a client to a group. It contains the sender, the group, the content, and the timestamp of the message. In the following diagram are presented the main services interfaces that will be used to interact with the domain entities and to respond to the external events.\nInteraction between Entities linkFinally, we present the interaction between the main components of the chat service. The following diagram shows the sequence of main events that occours inside the chat service.\n"
            }
        );
    index.add(
            {
                id:  14 ,
                href: "\/docs\/4-detailed-design\/3-notification-service\/",
                title: "Notification Service design",
                description: "Structure link ",
                content: "Structure link "
            }
        );
    index.add(
            {
                id:  15 ,
                href: "\/docs\/5-implementation\/",
                title: "Implementation Details",
                description: "The internals of the system",
                content: ""
            }
        );
    index.add(
            {
                id:  16 ,
                href: "\/docs\/5-implementation\/1-location-service\/",
                title: "Location Service implementation details",
                description: "This chapter provides an overview of the implementation details of the Location Service.\nUser Tracking and Real-time Management linkThe most important and critical feature of the Location Service is the tracking of the user’s location and real-time management of their state considering the high volume of data that needs to be processed in real-time. Moreover, the service is in charge of the user monitoring during the SOS and Routing modes, which require to take real-time actions to ensure the user’s safety.\n",
                content: "This chapter provides an overview of the implementation details of the Location Service.\nUser Tracking and Real-time Management linkThe most important and critical feature of the Location Service is the tracking of the user’s location and real-time management of their state considering the high volume of data that needs to be processed in real-time. Moreover, the service is in charge of the user monitoring during the SOS and Routing modes, which require to take real-time actions to ensure the user’s safety.\nFor what concern the technology stack, the real-time location and user state updates are managed through the WebSocket protocol, which allows bidirectional communication between the client and the service. While this is a common choice for real-time applications and it is well supported by the majority of the programming languages and frameworks, it is worth mentioning that the WebSocket protocol brings with it some challenges in terms of scalability of the service, which is a fundamental requirement for the system. Indeed, each socket connection is bound to a specific instance of the service, which means it is needed to make sure that all the requests from specific users are forwarded to the same instance of the service.\nOne another important aspect to consider is that this service is intrinsically stateful: it needs to keep track of the user’s location and state and take actions based on the history of the past updates and the current state.\nTo address these challenges we adopted a two-level approach. First, the system has been designed and implemented with a fully event-driven approach, starting from the core of the service - the domain - on top of a “event reactions” mechanism. Second, on the technological level, we selected a distributed actor framework based on Akka Cluster thanks to its capabilities to manage and allocate, in a location-transparent way, the actors across the cluster nodes, allowing to scale the service horizontally and to ensure the fault-tolerance of the system.\nFor these reasons the Location Service is implemented in Scala.\nEvent reactions linkThe core of the Location Service is built around the event reactions concept, which represents the actions that the service takes in response to the service driving events.\nThanks to Scala, the event reactions are implemented as ADTs on top of a convenient DSL that allows to define and compose them as a pipeline in a functional way with a “short-circuit” semantic: if one step in the pipeline return a Left outcome (the opposite of a Right outcome) the pipeline stops and the result is returned to the caller. This allows, in the future, to easily extend the pipeline with new steps without changing the existing ones, thus ensuring the extensibility and maintainability of the system.\nThe implemented pipeline is used to react to the DrivingEvents and take appropriate actions to track appropriately the user’s location and state and is compose of the following steps:\nflowchart LR id1(Pre check notifier) id2(Arrival check) id3(Stationary check) id4(Arrival timeout check) id1 --\u003e id2 id2 --\u003e id3 id3 --\u003e id4 Pre check notifier: this steps intercepts valuable events for which a notification has to be sent to the user. Arrival check: this step checks if the user is in routing mode and has arrived at a specific location. Stationary check: this step checks if the user is in routing mode and has become stuck in a specific location. Arrival timeout check: this step checks if the user is in routing mode and has not arrived at the expected destination within the expected time. For example, the following snippet shows the reaction\nobject ArrivalCheck: def apply[F[_]: Async](using MapsService[F], NotificationService[F], UserGroupsService[F]): EventReaction[F] = on[F]: (session, event) =\u003e event match case e: SampledLocation if session.tracking.exists(_.isMonitorable) =\u003e for config \u003c- ReactionsConfiguration.get tracking \u003c- session.tracking.asMonitorable.get.pure[F] distance \u003c- summon[MapsService[F]].distance(tracking.mode)(e.position, tracking.destination.position) isWithinProximity = distance.toMeters.value \u003c= config.proximityToleranceMeters.meters.value _ \u003c- if isWithinProximity then sendNotification(session.scope, successMessage) else Async[F].unit yield if isWithinProximity then Left(RoutingStopped(e.timestamp, e.user, e.group)) else Right(Continue) case _ =\u003e Right(Continue).pure[F] They can be composed in a pipeline as follows:\nval reaction = ( PreCheckNotifier[IO] \u003e\u003e\u003e ArrivalCheck[IO] \u003e\u003e\u003e StationaryCheck[IO] \u003e\u003e\u003e ArrivalTimeoutCheck[IO] )(s, e) Akka Cluster to the rescue linkSince the service should track a large number of users and their tracking information concurrently for each group, the actor model, and in particular, Akka is the perfect fit for this scenario since it can handle smoothly a huge number of actors per node thanks to their very light memory footprint.\nIn particular, the Location Service is implemented using the Akka Cluster Sharding module, which allows to distribute stateful actors across the cluster nodes in a location-transparent way. This means that the service can scale horizontally by adding more nodes to the cluster and the actors will be automatically distributed and, possibly, rebalanced across the nodes without any kind of intervention from the underlying infrastructure. Moreover, the interaction between the actors is guided by their only logical identifier despite their physical location.\nMoreover, the Akka framework support the integration of websockets through the Akka HTTP module, which allows to easily expose the WebSocket endpoints to the clients and to manage the connections and their handlers through actors distributed across the cluster, zeroing the need for additional infrastructure components to deal with scaling and fault-tolerance.\nFor our purposes two main actor entities have been designed:\nRealTimeUserTracker actor which is responsible for managing and tracking a user in real-time in a specific group (recall different group may have different views of the user state and location); GroupManager actor which keeps track of all active websocket connections for a specific group (or, rather, all the actor references of the websocket handlers), acting as a router for the messages between the RealTimeUserTracker actors and the clients. \u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e "
            }
        );
    index.add(
            {
                id:  17 ,
                href: "\/docs\/5-implementation\/2-notification-service\/",
                title: "Notification Service implementation details",
                description: "High level overview and modules structure linkCurrently, the only supported notification types are push notifications, which are essential to guarantee that the client is immediately informed about groups changes or user state changes, like the trigger of the SOS alert or the journey start.\nMessage broker (:mom) linkLike already presented in the Architecture section, the notification service is integrated with the message broker to receive notification commands from other microservices.\n",
                content: "High level overview and modules structure linkCurrently, the only supported notification types are push notifications, which are essential to guarantee that the client is immediately informed about groups changes or user state changes, like the trigger of the SOS alert or the journey start.\nMessage broker (:mom) linkLike already presented in the Architecture section, the notification service is integrated with the message broker to receive notification commands from other microservices.\nPush Notifications (:fcm) linkThe microservice is integrated with Firebase Cloud Messaging (FCM) to send push notifications to the client application.\nFCM is a cross-platform messaging solution provided by Google that enables developers to send notifications and data messages to apps running on iOS, Android, and web platforms. It allows backend services to communicate with client applications by delivering messages efficiently and securely.\nFCM has been chosen over plain WebSockets, which are already used in the system for the real-time tracking of the user’s position, due to several compelling reasons aligned with our specific requirements and infrastructure goals:\nOffline message handling\nOne of the core requirements for the notification service was to ensure message delivery even when users are temporarily offline or the client application is not in foreground.\nFCM natively supports these features: it delivers messages directly to the device’s system tray, allowing users to interact with them to bring the application back to the foreground. If the device is offline, FCM temporarily queues the messages and ensures their delivery as soon as the device reconnects. These features guarantees that users receive all relevant notifications without requiring additional queuing mechanisms.\nScalability and reliability\nFCM is built on Google’s infrastructure, offering seamless scalability without requiring to manage servers, load balancers, or clustering mechanisms. It can handle millions of messages per day effortlessly, with built-in queuing and retry mechanisms for undelivered messages.\nOn the other hand, WebSocket infrastructure demands significant engineering effort to manage load balancing and scaling.\nSecurity and Authentication\nFirebase Cloud Messaging employs OAuth 2.0 for secure authentication of API requests, ensuring that only authorized services can send messages. All communications are encrypted using TLS by default, simplifying compliance with security standards.\nAligned with Use Case: One-Way Notifications\nThe primary function of the notification service is to send one-way notifications from backend systems to users’ devices, not to enable full-duplex communication. FCM is purpose-built for this scenario, providing optimized delivery for both notification messages (visible alerts) and data messages (background processing).\nWhile WebSockets shine in scenarios requiring continuous, bidirectional communication—such as chat apps or live data feeds—they add unnecessary complexity for our needs, where responses from clients are not required.\nLifecycle flow linkThe lifecycle of a push notification message follows these steps:\nThe client app registers the device to FCM, obtaining a registration token that uniquely identifies the app instance. This is direct client app responsibility; The client sends the registration token to the notification service, associating it with the user’s account, through a gRPC API; When a new notification is triggered by one of the other microservices through the message broker, a notification message is composed and sent to the FCM backend using the registration token; The FCM backend delivers the message to the device with the corresponding registration token. In this process, the notification service is responsible for handling the registration and invalidation of device tokens, as well as the composition and delivery of notification messages to the FCM backend.\nNotifications Publisher linkThe logic for sending notifications is encapsulated in the fcm adapter module.\n/** * A notifications publisher sending notifications using Firebase Cloud Messaging. */ class FirebaseCloudNotificationPublisher( private val firebase: Firebase, private val usersTokensRepository: UsersTokensRepository, groupsRepository: GroupsRepository, ) : BasicNotificationPublisher(groupsRepository) { override suspend fun send(message: NotificationMessage, userIds: Set) = userIds.map { usersTokensRepository.get(it) }.forEach { it.mapCatching { userTokens -\u003e userTokens.forEach { userToken -\u003e firebase.sendMessage(userToken.token, message) } }.onFailure { err -\u003e logger.error(\"Failure in sending notification {}: {}\", message, err.message) } } private companion object { private val logger = LoggerFactory.getLogger(this::class.java) } } /** * A Firebase client facade to send notifications. */ class Firebase private constructor(private val app: FirebaseMessaging) { /** * Configuration for the Firebase client. * @property serviceAccountFilePath The absolute path to the service account file. */ data class Configuration( val serviceAccountFilePath: String, ) /** Sends the given [notificationMessage] using the specified [token]. */ fun sendMessage(token: Token, notificationMessage: NotificationMessage) = runCatching { val notification = Notification.builder() .setTitle(notificationMessage.title()) .build() val message = Message.builder() .setNotification(notification) .putData(\"title\", notificationMessage.title()) .putData(\"body\", notificationMessage.body()) .setToken(token) .build() app.send(message) } /** A factory for creating instances of [Firebase]. */ companion object { private const val APP_ID = \"notification-service\" /** Creates a new instance of [Firebase] using the given [configuration]. */ fun create(configuration: Configuration): Result = runCatching { val serviceAccountFilePath = File(configuration.serviceAccountFilePath) .takeIf { it.exists() \u0026\u0026 it.isFile \u0026\u0026 it.extension == \"json\" } ?.absolutePath ?: error(\"${configuration.serviceAccountFilePath} is not present or is not a valid account file!\") val credentials = GoogleCredentials.fromStream(FileInputStream(serviceAccountFilePath)) val options = FirebaseOptions.builder() .setCredentials(credentials) .build() return Result.success(Firebase(FirebaseMessaging.getInstance(FirebaseApp.initializeApp(options, APP_ID)))) } } } API (:grpc) linkThe client can register the device token obtained from FCM to the notification service through a gRPC API, whose protobuf definition is as follows:\nservice UsersTokensService { rpc Register(UserToken) returns (EmptyResponse); rpc Invalidate(UserToken) returns (EmptyResponse); } message UserToken { string user = 1; string token = 2; } message Status { StatusCode code = 1; optional string message = 2; } enum StatusCode { OK = 0; CONFLICT = 1; NOT_FOUND = 2; GENERIC_ERROR = 3; } message EmptyResponse { Status status = 1; } "
            }
        );
    index.add(
            {
                id:  18 ,
                href: "\/docs\/5-implementation\/3-chat-service\/",
                title: "Chat Service implementation details",
                description: "Chat Messaging and Real-time Management linkThe primary functions of the chat service are to manage the chat groups and the relative messages that are exchanged between users of these groups. In most of the cases the amount of messages exchanged is high, and the service needs to manage them in real-time with low latency of response.\nWe built a WebSocket-based communication system using an actor model. Specifically, we leveraged the Event Sourcing module from the Akka framework to handle Group instances. This approach treats Events as first-class citizens while maintaining consistent chat state.\n",
                content: "Chat Messaging and Real-time Management linkThe primary functions of the chat service are to manage the chat groups and the relative messages that are exchanged between users of these groups. In most of the cases the amount of messages exchanged is high, and the service needs to manage them in real-time with low latency of response.\nWe built a WebSocket-based communication system using an actor model. Specifically, we leveraged the Event Sourcing module from the Akka framework to handle Group instances. This approach treats Events as first-class citizens while maintaining consistent chat state.\nWebSockets proved ideal for this use case since each client establishes and maintains an open connection with the server throughout the chat session. This design also addresses scalability concerns, as each connection binds to a specific service instance, ensuring all requests from a user route to the same service instance. To further enhance scalability, we implemented the whole system using Akka Cluster, which allows automatic and trasnparent allocation of actors across cluster nodes, ensuring horizontal scaling and fault tolerance.\nChat Management linkInside the chat system are present two type of actor entities: The GroupEventSourceHandler and the ClientActor. The first one is developed upon the Event Sourcing pattern, the entity it receives commands that represents the actions that can be performed on the group, and emits events that represents changes that have been applied to the group.\nIn the following snippet is shown the implementation that handles a new client joining the group:\nobject GroupEventSourceHandler: def apply(groupId: String): Behavior[Command] = EventSourcedBehavior[Command, Event, State]( persistenceId = PersistenceId(entityKey.name, groupId), emptyState = Group.empty(groupId), commandHandler = commandHandler, eventHandler = eventHandler, ) /** Handle an incoming command from the outside, triggering an event in the domain as response * @param state The actual state of the entity * @param command The received command * @return Return a [[ReplyEffect]] with the response of the operation */ private def commandHandler(state: State, command: Command): Effect[Event, State] = command match case ClientJoinsGroup(clientID, replyTo) =\u003e if state.isPresent(clientID) then Effect.reply(replyTo): StatusReply.Error(CLIENT_ALREADY_JOINED withClientId clientID) else Effect.persist(ClientJoinedToGroup(clientID)).thenReply(replyTo): state =\u003e StatusReply.Success(ClientSuccessfullyJoined(state.clientIDList)) /** Handle a triggered event letting the entity pass to a new state * @param state The actual state of the entity * @param event The triggered event * @return The new state of the entity */ private def eventHandler(state: State, event: Event): State = event match case ClientJoinsGroup(clientID, replyTo) =\u003e if state.isPresent(clientID) then Effect.reply(replyTo): StatusReply.Error(CLIENT_ALREADY_JOINED withClientId clientID) else Effect.persist(ClientJoinedToGroup(clientID)).thenReply(replyTo): state =\u003e StatusReply.Success(ClientSuccessfullyJoined(state.clientIDList)) The ClientActor is instead responsible for managing the communication between the client and the group. It receives messages from the client and forwards them to the group, and vice versa. This entity is created through the webserver when a new connection is established, and is then linked to the GroupEventSourceHandler that manages the group the client is part of. As Akka HTTP is used as the webserver, the ClientActor entity is created using an Akka Stream that allows to handle the WebSocket connection.\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e \u003c!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\"\u003e "
            }
        );
    index.add(
            {
                id:  19 ,
                href: "\/docs\/6-validation\/validation\/",
                title: "Self Assessment and Validation",
                description: "Self assessment and validation of the system.",
                content: "Different types of automated tests, at different granularity, are in place to ensure the correctness of the system, as well as the quality of the software product as a whole.\nThe testing strategy follows Martin Fowler’s Test Pyramid idea, which advocates for a higher number of low-level unit tests that are that are fast and cost-effective, complemented by fewer high-level integration and end-to-end tests that, while slower and more complex, validate the overall system’s functionalities.\nEach type of test has been designed and executed accordingly, as detailed in the following sections.\nArchitectural Testing linkArchUnit have been used to enforce architectural constraints, making sure to adhere to the Hexagonal architecture (also known as Onion architecture or Ports and Adapters), preventing unwanted dependencies, maintaining separation of concerns and ensuring architectural decisions are consistently followed over time.\nAn example of arch unit test specification and rules used is shown below and can be found here.\n\"Project-wise architecture\" should \"adhere to ports and adapters, a.k.a onion architecture\" in: val locationGroup = \"io.github.positionpal.location\" val code = ClassFileImporter().importPackages(locationGroup) onionArchitecture() .domainModels(s\"$locationGroup.commons..\", s\"$locationGroup.domain..\") .applicationServices(s\"$locationGroup.application..\", s\"$locationGroup.presentation..\") .adapter(\"real time tracker component\", s\"$locationGroup.tracking..\") .adapter(\"storage\", s\"$locationGroup.storage..\") .adapter(\"message broker\", s\"$locationGroup.messages..\") .adapter(\"gRPC API\", s\"$locationGroup.grpc..\") .adapter(\"web sockets and http web API\", s\"$locationGroup.ws..\") .ignoreDependency(havingEntrypointAsOrigin, andAnyTarget) .because(\"`Entrypoint` submodule contains the main method wiring all the adapters together.\") .ensureAllClassesAreContainedInArchitectureIgnoring(havingEntrypointAsOrigin) .withOptionalLayers(true) .check(code) private def havingEntrypointAsOrigin = DescribedPredicate .describe[JavaClass](\"in `entrypoint` package\", _.getPackage.getName.contains(\"entrypoint\")) private def andAnyTarget = DescribedPredicate.alwaysTrue() This uses the onionArchitecture rule to enforce the following architectural constraints:\nthe domainModels contains all the domain entities and do not depend on any other layer; the applicationServices contains all the application services that are needed to run the application and use cases. They can use and see only the domain models and no other layer; the adapters modules contains logic to connect to external systems and/or infrastructure. They can see and use both the domain models and the application services, but no adapter can depend on another one. the only exception applies to the entrypoint package that contains the main application entrypoint and, thus, need to see and use the various adapters to wire all up together. Unit tests linkUnit tests, which sit at the lowest level of the testing pyramid, focus on verifying that small pieces of code—often individual classes—behave as expected.\nLeveraging testing DSLs frameworks like Kotest and ScalaTest tests can be crafted in a clear and succinct way, enhancing their comprehensibility and maintenance.\nIntegration tests linkVale–\nRequires bring up the single component to test and mock the others…\nEnd-to-End tests linkEnd-to-End tests are the heaviest and slowest tests, as they validate the system as a whole, simulating real user interactions and scenarios.\nThese tests are placed in the access point of the system, i.e., the API gateway, and to be run against the whole system requires the local deployment of all the services along with a mocked version of the client app to make it possible to test real system notifications and interactions in a controlled and repeatable way.\nFor this purpose a local deployment infrastructure has been set up using Docker Compose (more details on the Deployment section) with a custom template resolution strategy to allow the gateway test lifecycle to:\npackage in a Docker image the gateway service with the latest changes; package the mocked client application in a Docker image; bring up all the system microservices along with the gateway and the mocked client application; run the end-to-end tests against the system; tear down the whole system. As presented in the Domain Analysis section, the system has been end-to-end validated and tested using Gherking and Cucumber-JS libraries, along with Puppeteer for browser automation and interactions.\nAn example of a feature implementation is presented hereafter:\nWhen(\"I have arrived at the destination\", async () =\u003e { await this.hanWs.send( JSON.stringify(sample(global.han.userData.id, global.astro.id, cesenaCampusLocation)) ); }); Then(\"the routing is stopped\", { timeout: 20_000 }, async () =\u003e { await eventually(async () =\u003e { expect( receivedUpdates.some((update) =\u003e update.UserUpdate.user === global.han.userData.id \u0026\u0026 update.UserUpdate.status === \"Active\" ), ).to.be.true; }, 15_000); }); Then(\"my state is updated to `Active`\", { timeout: 15_000 }, async () =\u003e { await eventually(async () =\u003e { await expectSuccessfulGetRequest( `/api/session/state/${global.astro.id}/${global.han.userData.id}`, global.han.token, { status: { code: \"OK\" }, state: \"ACTIVE\", }, ); }, 10_000); }); The full suite of end-to-end features and tests can be found here and the report of the last run can be found below:\nStress Test linkGio–\nQuality Assurance linkFor all the projects and repositories, depending on the language they are developed in, different Quality Assurance (QA) tools have been used to validate the quality of the codebase. These tools ensure adherence to coding standards, maintainability, and early detection of potential issues, if appropriately integrated into Continuous Integration (as per DevOps best practices).\nThe following tools have been used for Scala:\nScalafmt: a code formatter ensuring consistency in code style across the project; Scalafix: a tool for refactoring and linting Scala code, allowing automated fixes for common issues and ensuring best practices. The following tools have been employed for Kotlin:\nktlint: a linter and formatter that enforces Kotlin coding standards automatically; detekt: a static code analysis tool for Kotlin that helps identify code smells, complexity issues, and potential security risks. For Javascript, ESLint, a static analysis tool that enforces coding style rules and detects problematic patterns in JavaScript code.\nTo further improve code quality and reliability, aggressive compilation options have been used across all projects. These options ensure that all warnings are treated as errors, preventing the introduction of potential issues into the codebase. This approach enforces strict compliance with best practices and minimizes the risk of overlooking important warnings that could lead to runtime errors or degraded maintainability.\nBy integrating these QA tools and enforcing strict compilation settings, the project maintains high code quality, reduces technical debt, and ensures consistency across different languages and repositories.\nFor more details on the QA tools and configuration used please refer to the DevOps section.\n"
            }
        );
    index.add(
            {
                id:  20 ,
                href: "\/docs\/7-devops\/devops\/",
                title: "DevOps",
                description: "DevOps practices and tools",
                content: "Build Automation linkScala Extras linkContinuous Integration and Delivery linkgraph TB; dispatcher([\"0. dispatcher\"]) dispatcher --\u003e build; build([\"1. matrix build\"]); dry-delivery([\"2. dry delivery\"]) build --\u003e dry-delivery; release([\"3. release\"]) dry-delivery --\u003e release; publish-images([\"5. publish-images\"]) release --\u003e publish-images; publish-doc([\"4. publish-doc\"]) release --\u003e publish-doc; success([\"6. success\"]) build .-\u003e success dry-delivery .-\u003e success release .-\u003e success publish-doc --\u003e success publish-images --\u003e success; Bots linkContinuous Deployment link"
            }
        );
    index.add(
            {
                id:  21 ,
                href: "\/docs\/8-deployment\/",
                title: "Deployment",
                description: "Deployment infrastructure",
                content: ""
            }
        );
    index.add(
            {
                id:  22 ,
                href: "\/docs\/",
                title: "Docs",
                description: "",
                content: ""
            }
        );
    search.addEventListener('input', show_results, true);

    function show_results(){
        const maxResult =  5 ;
        const minlength =  0 ;
        var searchQuery = sanitizeHTML(this.value);
        var results = index.search(searchQuery, {limit: maxResult, enrich: true});

        
        const flatResults = new Map(); 
        for (const result of results.flatMap(r => r.result)) {
        if (flatResults.has(result.doc.href)) continue;
        flatResults.set(result.doc.href, result.doc);
        }

        suggestions.innerHTML = "";
        suggestions.classList.remove('d-none');

        
        if (searchQuery.length < minlength) {
            const minCharMessage = document.createElement('div')
            minCharMessage.innerHTML = `Please type at least <strong>${minlength}</strong> characters`
            minCharMessage.classList.add("suggestion__no-results");
            suggestions.appendChild(minCharMessage);
            return;
        } else {
            
            if (flatResults.size === 0 && searchQuery) {
                const noResultsMessage = document.createElement('div')
                noResultsMessage.innerHTML = "No results for" + ` "<strong>${searchQuery}</strong>"`
                noResultsMessage.classList.add("suggestion__no-results");
                suggestions.appendChild(noResultsMessage);
                return;
            }
        }

        
        for(const [href, doc] of flatResults) {
            const entry = document.createElement('div');
            suggestions.appendChild(entry);

            const a = document.createElement('a');
            a.href = href;
            entry.appendChild(a);

            const title = document.createElement('span');
            title.textContent = doc.title;
            title.classList.add("suggestion__title");
            a.appendChild(title);

            const description = document.createElement('span');
            description.textContent = doc.description;
            description.classList.add("suggestion__description");
            a.appendChild(description);

            suggestions.appendChild(entry);

            if(suggestions.childElementCount == maxResult) break;
        }
    }
    }());
</script></body></html>