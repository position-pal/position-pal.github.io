<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1020px" preserveAspectRatio="none" style="width:4287px;height:1020px;" version="1.1" viewBox="0 0 4287 1020" width="4287px" zoomAndPan="magnify"><defs><filter height="300%" id="fztwy7nfv8a3b" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[77349be1bd27b81b697a0f9b3aded3c8]
cluster infrastructure--><polygon fill="#FFFFFF" filter="url(#fztwy7nfv8a3b)" points="22,24.5,138,24.5,145,46.7969,4265,46.7969,4265,1008,22,1008,22,24.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="22" x2="145" y1="46.7969" y2="46.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="110" x="26" y="39.4951">infrastructure</text><!--MD5=[3ff016c1aa5003d713567a073e2181a6]
cluster application--><polygon fill="#FFFFFF" filter="url(#fztwy7nfv8a3b)" points="1785,67.5,1876,67.5,1883,89.7969,4241,89.7969,4241,984,1785,984,1785,67.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="1785" x2="1883" y1="89.7969" y2="89.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="85" x="1789" y="82.4951">application</text><!--MD5=[27f772719433d509ddbc20ff768eba08]
cluster domain--><polygon fill="#FFFFFF" filter="url(#fztwy7nfv8a3b)" points="2941,110.5,3004,110.5,3011,132.7969,3702,132.7969,3702,829,2941,829,2941,110.5" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 1.5;" x1="2941" x2="3011" y1="132.7969" y2="132.7969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="57" x="2945" y="125.4951">domain</text><!--MD5=[252d4b30446966758b400fe470ca220f]
class NotificationsServiceAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="NotificationsServiceAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="205" x="37.5" y="301"/><ellipse cx="52.5" cy="317" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M55.4688,322.6406 Q54.8906,322.9375 54.25,323.0781 Q53.6094,323.2344 52.9063,323.2344 Q50.4063,323.2344 49.0781,321.5938 Q47.7656,319.9375 47.7656,316.8125 Q47.7656,313.6875 49.0781,312.0313 Q50.4063,310.375 52.9063,310.375 Q53.6094,310.375 54.25,310.5313 Q54.9063,310.6875 55.4688,310.9844 L55.4688,313.7031 Q54.8438,313.125 54.25,312.8594 Q53.6563,312.5781 53.0313,312.5781 Q51.6875,312.5781 51,313.6563 Q50.3125,314.7188 50.3125,316.8125 Q50.3125,318.9063 51,319.9844 Q51.6875,321.0469 53.0313,321.0469 Q53.6563,321.0469 54.25,320.7813 Q54.8438,320.5 55.4688,319.9219 L55.4688,322.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="173" x="66.5" y="321.1543">NotificationsServiceAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="241.5" y1="333" y2="333"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="38.5" x2="241.5" y1="341" y2="341"/><path d="M38.5,137 L38.5,207.5313 A0,0 0 0 0 38.5,207.5313 L137.54,207.5313 L140.31,300.86 L145.54,207.5313 L245.5,207.5313 A0,0 0 0 0 245.5,207.5313 L245.5,147 L235.5,137 L38.5,137 A0,0 0 0 0 38.5,137 " fill="#FBFB77" filter="url(#fztwy7nfv8a3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M235.5,137 L235.5,147 L245.5,147 L235.5,137 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="149" x="44.5" y="154.0669">This class is an adapter</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="44.5" y="169.1997">that forwards notifications to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="44.5" y="184.3325">the notification microservice</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="44.5" y="199.4653">through message broker</text><!--MD5=[fbb28e36671a529b321e046cbeba984c]
class MapsServiceAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="MapsServiceAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="1003" y="298"/><ellipse cx="1018" cy="316.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1020.9688,322.6094 Q1020.3906,322.9063 1019.75,323.0469 Q1019.1094,323.2031 1018.4063,323.2031 Q1015.9063,323.2031 1014.5781,321.5625 Q1013.2656,319.9063 1013.2656,316.7813 Q1013.2656,313.6563 1014.5781,312 Q1015.9063,310.3438 1018.4063,310.3438 Q1019.1094,310.3438 1019.75,310.5 Q1020.4063,310.6563 1020.9688,310.9531 L1020.9688,313.6719 Q1020.3438,313.0938 1019.75,312.8281 Q1019.1563,312.5469 1018.5313,312.5469 Q1017.1875,312.5469 1016.5,313.625 Q1015.8125,314.6875 1015.8125,316.7813 Q1015.8125,318.875 1016.5,319.9531 Q1017.1875,321.0156 1018.5313,321.0156 Q1019.1563,321.0156 1019.75,320.75 Q1020.3438,320.4688 1020.9688,319.8906 L1020.9688,322.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="129" x="1031.5" y="314.1387">«outbound adapter»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="128" x="1032" y="328.1074">MapsServiceAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1004" x2="1162" y1="335.9375" y2="335.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1004" x2="1162" y1="343.9375" y2="343.9375"/><path d="M1198,312.5 L1198,321 L1163.37,325 L1198,329 L1198,337.6328 A0,0 0 0 0 1198,337.6328 L1476,337.6328 A0,0 0 0 0 1476,337.6328 L1476,322.5 L1466,312.5 L1198,312.5 A0,0 0 0 0 1198,312.5 " fill="#FBFB77" filter="url(#fztwy7nfv8a3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1466,312.5 L1466,322.5 L1476,322.5 L1466,312.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="257" x="1204" y="329.5669">Uses external geocoding and maps APIs</text><!--MD5=[6544a577f3f885f47e62650a718a5be5]
class RealTimeTrackingKafkaAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="RealTimeTrackingKafkaAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="225" x="742.5" y="298"/><ellipse cx="757.5" cy="316.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M760.4688,322.6094 Q759.8906,322.9063 759.25,323.0469 Q758.6094,323.2031 757.9063,323.2031 Q755.4063,323.2031 754.0781,321.5625 Q752.7656,319.9063 752.7656,316.7813 Q752.7656,313.6563 754.0781,312 Q755.4063,310.3438 757.9063,310.3438 Q758.6094,310.3438 759.25,310.5 Q759.9063,310.6563 760.4688,310.9531 L760.4688,313.6719 Q759.8438,313.0938 759.25,312.8281 Q758.6563,312.5469 758.0313,312.5469 Q756.6875,312.5469 756,313.625 Q755.3125,314.6875 755.3125,316.7813 Q755.3125,318.875 756,319.9531 Q756.6875,321.0156 758.0313,321.0156 Q758.6563,321.0156 759.25,320.75 Q759.8438,320.4688 760.4688,319.8906 L760.4688,322.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="119" x="808.5" y="314.1387">«inbound adapter»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="193" x="771.5" y="328.1074">RealTimeTrackingKafkaAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="743.5" x2="966.5" y1="335.9375" y2="335.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="743.5" x2="966.5" y1="343.9375" y2="343.9375"/><!--MD5=[71c41a4f12bca7794fa1a43747c4c044]
class UserTrackingInfoGrpcAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="UserTrackingInfoGrpcAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="216" x="491" y="298"/><ellipse cx="506" cy="316.9688" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M508.9688,322.6094 Q508.3906,322.9063 507.75,323.0469 Q507.1094,323.2031 506.4063,323.2031 Q503.9063,323.2031 502.5781,321.5625 Q501.2656,319.9063 501.2656,316.7813 Q501.2656,313.6563 502.5781,312 Q503.9063,310.3438 506.4063,310.3438 Q507.1094,310.3438 507.75,310.5 Q508.4063,310.6563 508.9688,310.9531 L508.9688,313.6719 Q508.3438,313.0938 507.75,312.8281 Q507.1563,312.5469 506.5313,312.5469 Q505.1875,312.5469 504.5,313.625 Q503.8125,314.6875 503.8125,316.7813 Q503.8125,318.875 504.5,319.9531 Q505.1875,321.0156 506.5313,321.0156 Q507.1563,321.0156 507.75,320.75 Q508.3438,320.4688 508.9688,319.8906 L508.9688,322.6094 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="119" x="552.5" y="314.1387">«inbound adapter»</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="184" x="520" y="328.1074">UserTrackingInfoGrpcAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="492" x2="706" y1="335.9375" y2="335.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="492" x2="706" y1="343.9375" y2="343.9375"/><!--MD5=[50c4776a46e02c3515edb754b9d15f36]
class RoutesTrackingServiceKafkaAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="RoutesTrackingServiceKafkaAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="258" x="1511" y="301"/><ellipse cx="1526" cy="317" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1528.9688,322.6406 Q1528.3906,322.9375 1527.75,323.0781 Q1527.1094,323.2344 1526.4063,323.2344 Q1523.9063,323.2344 1522.5781,321.5938 Q1521.2656,319.9375 1521.2656,316.8125 Q1521.2656,313.6875 1522.5781,312.0313 Q1523.9063,310.375 1526.4063,310.375 Q1527.1094,310.375 1527.75,310.5313 Q1528.4063,310.6875 1528.9688,310.9844 L1528.9688,313.7031 Q1528.3438,313.125 1527.75,312.8594 Q1527.1563,312.5781 1526.5313,312.5781 Q1525.1875,312.5781 1524.5,313.6563 Q1523.8125,314.7188 1523.8125,316.8125 Q1523.8125,318.9063 1524.5,319.9844 Q1525.1875,321.0469 1526.5313,321.0469 Q1527.1563,321.0469 1527.75,320.7813 Q1528.3438,320.5 1528.9688,319.9219 L1528.9688,322.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="226" x="1540" y="321.1543">RoutesTrackingServiceKafkaAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1512" x2="1768" y1="333" y2="333"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1512" x2="1768" y1="341" y2="341"/><!--MD5=[43b952cdbf6ae444dbffb83a20b92b2b]
class RoutesInfoGrpcAdapter--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="RoutesInfoGrpcAdapter" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="278" y="301"/><ellipse cx="293" cy="317" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M295.9688,322.6406 Q295.3906,322.9375 294.75,323.0781 Q294.1094,323.2344 293.4063,323.2344 Q290.9063,323.2344 289.5781,321.5938 Q288.2656,319.9375 288.2656,316.8125 Q288.2656,313.6875 289.5781,312.0313 Q290.9063,310.375 293.4063,310.375 Q294.1094,310.375 294.75,310.5313 Q295.4063,310.6875 295.9688,310.9844 L295.9688,313.7031 Q295.3438,313.125 294.75,312.8594 Q294.1563,312.5781 293.5313,312.5781 Q292.1875,312.5781 291.5,313.6563 Q290.8125,314.7188 290.8125,316.8125 Q290.8125,318.9063 291.5,319.9844 Q292.1875,321.0469 293.5313,321.0469 Q294.1563,321.0469 294.75,320.7813 Q295.3438,320.5 295.9688,319.9219 L295.9688,322.6406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="146" x="307" y="321.1543">RoutesInfoGrpcAdapter</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="279" x2="455" y1="333" y2="333"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="279" x2="455" y1="341" y2="341"/><!--MD5=[b9e5a612222edcab7b38cf0040337870]
class TrackingEventsStore--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="TrackingEventsStore" style="stroke: #A80036; stroke-width: 1.5;" width="239" x="3717.5" y="727"/><ellipse cx="3768.75" cy="745.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3764.6719,741.7344 L3764.6719,739.5781 L3772.0625,739.5781 L3772.0625,741.7344 L3769.5938,741.7344 L3769.5938,749.8125 L3772.0625,749.8125 L3772.0625,751.9688 L3764.6719,751.9688 L3764.6719,749.8125 L3767.1406,749.8125 L3767.1406,741.7344 L3764.6719,741.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="3800.75" y="743.1387">«outbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="128" x="3789.25" y="757.1074">TrackingEventsStore</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3718.5" x2="3955.5" y1="764.9375" y2="764.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3718.5" x2="3955.5" y1="772.9375" y2="772.9375"/><ellipse cx="3728.5" cy="783.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="213" x="3737.5" y="787.1479">update(TrackingEvent: TrackingEvent)</text><ellipse cx="3728.5" cy="796.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="169" x="3737.5" y="799.9526">by(user: User): TrackingEvent</text><!--MD5=[80f18bf454331480fc3e2d8c6e3028d9]
class RoutesStore--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="92.3516" id="RoutesStore" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="2832" y="876"/><ellipse cx="2853.75" cy="894.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2849.6719,890.7344 L2849.6719,888.5781 L2857.0625,888.5781 L2857.0625,890.7344 L2854.5938,890.7344 L2854.5938,898.8125 L2857.0625,898.8125 L2857.0625,900.9688 L2849.6719,900.9688 L2849.6719,898.8125 L2852.1406,898.8125 L2852.1406,890.7344 L2849.6719,890.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="2867.25" y="892.1387">«outbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="2881.25" y="906.1074">RoutesStore</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2833" x2="2979" y1="913.9375" y2="913.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2833" x2="2979" y1="921.9375" y2="921.9375"/><ellipse cx="2843" cy="932.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="119" x="2852" y="936.1479">update(Route: Route)</text><ellipse cx="2843" cy="945.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="2852" y="948.9526">by(user: User): Route</text><ellipse cx="2843" cy="958.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="2852" y="961.7573">delete(Route: Route)</text><!--MD5=[0d3d67a6ef04163560c9e2439e3d19cf]
class NotificationsService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="66.7422" id="NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="260" x="3943" y="139"/><ellipse cx="4007.75" cy="157.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4003.6719,153.7344 L4003.6719,151.5781 L4011.0625,151.5781 L4011.0625,153.7344 L4008.5938,153.7344 L4008.5938,161.8125 L4011.0625,161.8125 L4011.0625,163.9688 L4003.6719,163.9688 L4003.6719,161.8125 L4006.1406,161.8125 L4006.1406,153.7344 L4003.6719,153.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="4036.75" y="155.1387">«outbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="4028.25" y="169.1074">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3944" x2="4202" y1="176.9375" y2="176.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3944" x2="4202" y1="184.9375" y2="184.9375"/><ellipse cx="3954" cy="195.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="234" x="3963" y="199.1479">notify(notificationEvent: NotificationEvent)</text><path d="M3718,147.5 L3718,187.7656 A0,0 0 0 0 3718,187.7656 L3908,187.7656 A0,0 0 0 0 3908,187.7656 L3908,171.6328 L3947,195.3398 L3908,163.6328 L3908,157.5 L3898,147.5 L3718,147.5 A0,0 0 0 0 3718,147.5 " fill="#FBFB77" filter="url(#fztwy7nfv8a3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3898,147.5 L3898,157.5 L3908,157.5 L3898,147.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="monospace" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="136" x="3724" y="164.5669">NotificationEvent</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="25" x="3864" y="164.5669">is in</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="3724" y="179.6997">shared kernel module (?)</text><!--MD5=[fb4eb54bb91ffdeeb77b010f7f681b1d]
class MapsService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="MapsService" style="stroke: #A80036; stroke-width: 1.5;" width="392" x="3228" y="882"/><ellipse cx="3369.25" cy="900.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3365.1719,896.7344 L3365.1719,894.5781 L3372.5625,894.5781 L3372.5625,896.7344 L3370.0938,896.7344 L3370.0938,904.8125 L3372.5625,904.8125 L3372.5625,906.9688 L3365.1719,906.9688 L3365.1719,904.8125 L3367.6406,904.8125 L3367.6406,896.7344 L3365.1719,896.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="3387.75" y="898.1387">«outbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="3401.75" y="912.1074">MapsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3229" x2="3619" y1="919.9375" y2="919.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3229" x2="3619" y1="927.9375" y2="927.9375"/><ellipse cx="3239" cy="938.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="366" x="3248" y="942.1479">estimateArrivalTime(start: GPSPosition, end: GPSPosition): Date</text><ellipse cx="3239" cy="951.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="343" x="3248" y="954.9526">distance(start: GPSPosition, end: GPSPosition): GPSPosition</text><!--MD5=[bcbe4de17c93c15f7b0d57ec9fc1ef91]
class UserTrackingInfoService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="92.3516" id="UserTrackingInfoService" style="stroke: #A80036; stroke-width: 1.5;" width="248" x="3721" y="564.5"/><ellipse cx="3765.75" cy="583.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3761.6719,579.2344 L3761.6719,577.0781 L3769.0625,577.0781 L3769.0625,579.2344 L3766.5938,579.2344 L3766.5938,587.3125 L3769.0625,587.3125 L3769.0625,589.4688 L3761.6719,589.4688 L3761.6719,587.3125 L3764.1406,587.3125 L3764.1406,579.2344 L3761.6719,579.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="3813.75" y="580.6387">«inbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="150" x="3786.25" y="594.6074">UserTrackingInfoService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3722" x2="3968" y1="602.4375" y2="602.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3722" x2="3968" y1="610.4375" y2="610.4375"/><ellipse cx="3732" cy="621.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="222" x="3741" y="624.6479">lastTraceOf(user: User): TrackingEvent</text><ellipse cx="3732" cy="634.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="3741" y="637.4526">routeOf(user: User): Route</text><ellipse cx="3732" cy="647.0469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="171" x="3741" y="650.2573">lastStateOf(user: User): State</text><path d="M4119,570 L4119,601.2656 L3893,633.6445 L4119,609.2656 L4119,640.5313 A0,0 0 0 0 4119,640.5313 L4225,640.5313 A0,0 0 0 0 4225,640.5313 L4225,580 L4215,570 L4119,570 A0,0 0 0 0 4119,570 " fill="#FBFB77" filter="url(#fztwy7nfv8a3b)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4215,570 L4215,580 L4225,580 L4215,570 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="4125" y="587.0669">At most 1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="59" x="4125" y="602.1997">route per</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="53" x="4125" y="617.3325">user per</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="4125" y="632.4653">time is active</text><!--MD5=[60d6b92408f98aed8df94d5c6e04aa63]
class State--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="99.2188" id="State" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="4004" y="561"/><ellipse cx="4025.3" cy="577" fill="#EB937F" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4029.4094,583 L4021.6906,583 L4021.6906,570.6094 L4029.4094,570.6094 L4029.4094,572.7656 L4024.1438,572.7656 L4024.1438,575.4375 L4028.9094,575.4375 L4028.9094,577.5938 L4024.1438,577.5938 L4024.1438,580.8438 L4029.4094,580.8438 L4029.4094,583 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="34" x="4040.7" y="581.1543">State</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="4005" x2="4083" y1="593" y2="593"/><ellipse cx="4015" cy="604" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="43" x="4024" y="607.2104">ACTIVE,</text><ellipse cx="4015" cy="616.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="54" x="4024" y="620.0151">INACTIVE,</text><ellipse cx="4015" cy="629.6094" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="29" x="4024" y="632.8198">SOS,</text><ellipse cx="4015" cy="642.4141" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="51" x="4024" y="645.6245">ROUTING</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="4005" x2="4083" y1="652.2188" y2="652.2188"/><!--MD5=[b78acf02d2d6b8bdd17a7d95365caa2d]
class RoutesTrackingService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="RoutesTrackingService" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="2751.5" y="285"/><ellipse cx="2766.5" cy="303.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2762.4219,299.7344 L2762.4219,297.5781 L2769.8125,297.5781 L2769.8125,299.7344 L2767.3438,299.7344 L2767.3438,307.8125 L2769.8125,307.8125 L2769.8125,309.9688 L2762.4219,309.9688 L2762.4219,307.8125 L2764.8906,307.8125 L2764.8906,299.7344 L2762.4219,299.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="105" x="2798.5" y="301.1387">«outbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="141" x="2780.5" y="315.1074">RoutesTrackingService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2752.5" x2="2923.5" y1="322.9375" y2="322.9375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2752.5" x2="2923.5" y1="330.9375" y2="330.9375"/><ellipse cx="2762.5" cy="341.9375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="78" x="2771.5" y="345.1479">onNewRoute()</text><ellipse cx="2762.5" cy="354.7422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="2771.5" y="357.9526">onRoutingEvent()</text><!--MD5=[0359f055f4c4a1ce28e4bdeb6f543b1c]
class RoutesInfoService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="66.7422" id="RoutesInfoService" style="stroke: #A80036; stroke-width: 1.5;" width="178" x="3015" y="888.5"/><ellipse cx="3045.3" cy="907.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3041.2219,903.2344 L3041.2219,901.0781 L3048.6125,901.0781 L3048.6125,903.2344 L3046.1438,903.2344 L3046.1438,911.3125 L3048.6125,911.3125 L3048.6125,913.4688 L3041.2219,913.4688 L3041.2219,911.3125 L3043.6906,911.3125 L3043.6906,903.2344 L3041.2219,903.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="3071.2" y="904.6387">«inbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="112" x="3062.7" y="918.6074">RoutesInfoService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3016" x2="3192" y1="926.4375" y2="926.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3016" x2="3192" y1="934.4375" y2="934.4375"/><ellipse cx="3026" cy="945.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="152" x="3035" y="948.6479">routeOf(user: User): Route</text><!--MD5=[6ceb13ff6c40d81c7b7339a702121535]
class RealTimeTrackingService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="66.7422" id="RealTimeTrackingService" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="3718" y="429.5"/><ellipse cx="3733" cy="448.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3728.9219,444.2344 L3728.9219,442.0781 L3736.3125,442.0781 L3736.3125,444.2344 L3733.8438,444.2344 L3733.8438,452.3125 L3736.3125,452.3125 L3736.3125,454.4688 L3728.9219,454.4688 L3728.9219,452.3125 L3731.3906,452.3125 L3731.3906,444.2344 L3728.9219,444.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="95" x="3776.5" y="445.6387">«inbound port»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="154" x="3747" y="459.6074">RealTimeTrackingService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3719" x2="3903" y1="467.4375" y2="467.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3719" x2="3903" y1="475.4375" y2="475.4375"/><ellipse cx="3729" cy="486.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="147" x="3738" y="489.6479">onNewEvent(event: Event)</text><!--MD5=[a89ae74da6fbfe221f859a30fe6a3491]
class application.NotificationsService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.NotificationsService" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="1801" y="148.5"/><ellipse cx="1816" cy="164.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1811.9219,160.2656 L1811.9219,158.1094 L1819.3125,158.1094 L1819.3125,160.2656 L1816.8438,160.2656 L1816.8438,168.3438 L1819.3125,168.3438 L1819.3125,170.5 L1811.9219,170.5 L1811.9219,168.3438 L1814.3906,168.3438 L1814.3906,160.2656 L1811.9219,160.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="122" x="1830" y="168.6543">NotificationsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1802" x2="1954" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1802" x2="1954" y1="188.5" y2="188.5"/><!--MD5=[c4cca582734ea15b39b35de884c93c62]
class application.MapsService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.MapsService" style="stroke: #A80036; stroke-width: 1.5;" width="109" x="2607.5" y="148.5"/><ellipse cx="2622.5" cy="164.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2618.4219,160.2656 L2618.4219,158.1094 L2625.8125,158.1094 L2625.8125,160.2656 L2623.3438,160.2656 L2623.3438,168.3438 L2625.8125,168.3438 L2625.8125,170.5 L2618.4219,170.5 L2618.4219,168.3438 L2620.8906,168.3438 L2620.8906,160.2656 L2618.4219,160.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="77" x="2636.5" y="168.6543">MapsService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2608.5" x2="2715.5" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2608.5" x2="2715.5" y1="188.5" y2="188.5"/><!--MD5=[0ef6d99a806422d18207b30a140ac3b5]
class application.RealTimeTrackingService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.RealTimeTrackingService" style="stroke: #A80036; stroke-width: 1.5;" width="186" x="2386" y="148.5"/><ellipse cx="2401" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2403.9688,170.1406 Q2403.3906,170.4375 2402.75,170.5781 Q2402.1094,170.7344 2401.4063,170.7344 Q2398.9063,170.7344 2397.5781,169.0938 Q2396.2656,167.4375 2396.2656,164.3125 Q2396.2656,161.1875 2397.5781,159.5313 Q2398.9063,157.875 2401.4063,157.875 Q2402.1094,157.875 2402.75,158.0313 Q2403.4063,158.1875 2403.9688,158.4844 L2403.9688,161.2031 Q2403.3438,160.625 2402.75,160.3594 Q2402.1563,160.0781 2401.5313,160.0781 Q2400.1875,160.0781 2399.5,161.1563 Q2398.8125,162.2188 2398.8125,164.3125 Q2398.8125,166.4063 2399.5,167.4844 Q2400.1875,168.5469 2401.5313,168.5469 Q2402.1563,168.5469 2402.75,168.2813 Q2403.3438,168 2403.9688,167.4219 L2403.9688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="154" x="2415" y="168.6543">RealTimeTrackingService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2387" x2="2571" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2387" x2="2571" y1="188.5" y2="188.5"/><!--MD5=[1f1d43c9bf15b4464c060bc490df18c6]
class application.UserTrackingInfoService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.UserTrackingInfoService" style="stroke: #A80036; stroke-width: 1.5;" width="182" x="2169" y="148.5"/><ellipse cx="2184" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2186.9688,170.1406 Q2186.3906,170.4375 2185.75,170.5781 Q2185.1094,170.7344 2184.4063,170.7344 Q2181.9063,170.7344 2180.5781,169.0938 Q2179.2656,167.4375 2179.2656,164.3125 Q2179.2656,161.1875 2180.5781,159.5313 Q2181.9063,157.875 2184.4063,157.875 Q2185.1094,157.875 2185.75,158.0313 Q2186.4063,158.1875 2186.9688,158.4844 L2186.9688,161.2031 Q2186.3438,160.625 2185.75,160.3594 Q2185.1563,160.0781 2184.5313,160.0781 Q2183.1875,160.0781 2182.5,161.1563 Q2181.8125,162.2188 2181.8125,164.3125 Q2181.8125,166.4063 2182.5,167.4844 Q2183.1875,168.5469 2184.5313,168.5469 Q2185.1563,168.5469 2185.75,168.2813 Q2186.3438,168 2186.9688,167.4219 L2186.9688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="150" x="2198" y="168.6543">UserTrackingInfoService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2170" x2="2350" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2170" x2="2350" y1="188.5" y2="188.5"/><!--MD5=[b53feda3028b6ab933ac98ff1444110b]
class application.RoutesTrackingService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.RoutesTrackingService" style="stroke: #A80036; stroke-width: 1.5;" width="173" x="2751.5" y="148.5"/><ellipse cx="2766.5" cy="164.5" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2762.4219,160.2656 L2762.4219,158.1094 L2769.8125,158.1094 L2769.8125,160.2656 L2767.3438,160.2656 L2767.3438,168.3438 L2769.8125,168.3438 L2769.8125,170.5 L2762.4219,170.5 L2762.4219,168.3438 L2764.8906,168.3438 L2764.8906,160.2656 L2762.4219,160.2656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="141" x="2780.5" y="168.6543">RoutesTrackingService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2752.5" x2="2923.5" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="2752.5" x2="2923.5" y1="188.5" y2="188.5"/><!--MD5=[34134203fcfae3f3a8cc7fcad587ec8c]
class application.RoutesInfoService--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="48" id="application.RoutesInfoService" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="1990" y="148.5"/><ellipse cx="2005" cy="164.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2007.9688,170.1406 Q2007.3906,170.4375 2006.75,170.5781 Q2006.1094,170.7344 2005.4063,170.7344 Q2002.9063,170.7344 2001.5781,169.0938 Q2000.2656,167.4375 2000.2656,164.3125 Q2000.2656,161.1875 2001.5781,159.5313 Q2002.9063,157.875 2005.4063,157.875 Q2006.1094,157.875 2006.75,158.0313 Q2007.4063,158.1875 2007.9688,158.4844 L2007.9688,161.2031 Q2007.3438,160.625 2006.75,160.3594 Q2006.1563,160.0781 2005.5313,160.0781 Q2004.1875,160.0781 2003.5,161.1563 Q2002.8125,162.2188 2002.8125,164.3125 Q2002.8125,166.4063 2003.5,167.4844 Q2004.1875,168.5469 2005.5313,168.5469 Q2006.1563,168.5469 2006.75,168.2813 Q2007.3438,168 2007.9688,167.4219 L2007.9688,170.1406 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="2019" y="168.6543">RoutesInfoService</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1991" x2="2133" y1="180.5" y2="180.5"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1991" x2="2133" y1="188.5" y2="188.5"/><!--MD5=[8773a24ada45bd479feb30f20b267058]
class GPSPosition--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="GPSPosition" style="stroke: #A80036; stroke-width: 1.5;" width="125" x="3323.5" y="727"/><ellipse cx="3341.65" cy="745.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3337.5719,741.7344 L3337.5719,739.5781 L3344.9625,739.5781 L3344.9625,741.7344 L3342.4938,741.7344 L3342.4938,749.8125 L3344.9625,749.8125 L3344.9625,751.9688 L3337.5719,751.9688 L3337.5719,749.8125 L3340.0406,749.8125 L3340.0406,741.7344 L3337.5719,741.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="90" x="3354.35" y="743.1387">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="72" x="3363.35" y="757.1074">GPSPosition</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3324.5" x2="3447.5" y1="764.9375" y2="764.9375"/><ellipse cx="3334.5" cy="775.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="89" x="3343.5" y="779.1479">latitude: Double</text><ellipse cx="3334.5" cy="788.7422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="99" x="3343.5" y="791.9526">longitude: Double</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3324.5" x2="3447.5" y1="798.5469" y2="798.5469"/><!--MD5=[3fd616f346a44cd59a91eb10b19e157c]
class User--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="User" style="stroke: #A80036; stroke-width: 1.5;" width="168" x="3437" y="285"/><ellipse cx="3493.75" cy="303.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3489.6719,299.7344 L3489.6719,297.5781 L3497.0625,297.5781 L3497.0625,299.7344 L3494.5938,299.7344 L3494.5938,307.8125 L3497.0625,307.8125 L3497.0625,309.9688 L3489.6719,309.9688 L3489.6719,307.8125 L3492.1406,307.8125 L3492.1406,299.7344 L3489.6719,299.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="3512.25" y="301.1387">«entity»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="28" x="3523.25" y="315.1074">User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3438" x2="3604" y1="322.9375" y2="322.9375"/><ellipse cx="3448" cy="333.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="55" x="3457" y="337.1479">id: UserId</text><ellipse cx="3448" cy="346.7422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="142" x="3457" y="349.9526">inGroups: Set&lt;GroupId&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3438" x2="3604" y1="356.5469" y2="356.5469"/><!--MD5=[a219e2ff7cd77b0d4705d4ba2ae8542d]
class UserId--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="UserId" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="3361" y="145.5"/><ellipse cx="3376" cy="164.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3371.9219,160.2344 L3371.9219,158.0781 L3379.3125,158.0781 L3379.3125,160.2344 L3376.8438,160.2344 L3376.8438,168.3125 L3379.3125,168.3125 L3379.3125,170.4688 L3371.9219,170.4688 L3371.9219,168.3125 L3374.3906,168.3125 L3374.3906,160.2344 L3371.9219,160.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="90" x="3388" y="161.6387">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="40" x="3413" y="175.6074">UserId</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3362" x2="3478" y1="183.4375" y2="183.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3362" x2="3478" y1="191.4375" y2="191.4375"/><!--MD5=[58921fb6bd1a448af61eb1cafc78138b]
class GroupId--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="GroupId" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="3514" y="145.5"/><ellipse cx="3529" cy="164.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3524.9219,160.2344 L3524.9219,158.0781 L3532.3125,158.0781 L3532.3125,160.2344 L3529.8438,160.2344 L3529.8438,168.3125 L3532.3125,168.3125 L3532.3125,170.4688 L3524.9219,170.4688 L3524.9219,168.3125 L3527.3906,168.3125 L3527.3906,160.2344 L3524.9219,160.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="90" x="3541" y="161.6387">«value object»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="50" x="3561" y="175.6074">GroupId</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3515" x2="3631" y1="183.4375" y2="183.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3515" x2="3631" y1="191.4375" y2="191.4375"/><!--MD5=[ac13618b1a974308c1f12eb6c57723dc]
class Event--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="73.6094" id="Event" style="stroke: #A80036; stroke-width: 1.5;" width="121" x="3370.5" y="426"/><ellipse cx="3409.8" cy="442" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3405.7219,437.7656 L3405.7219,435.6094 L3413.1125,435.6094 L3413.1125,437.7656 L3410.6438,437.7656 L3410.6438,445.8438 L3413.1125,445.8438 L3413.1125,448 L3405.7219,448 L3405.7219,445.8438 L3408.1906,445.8438 L3408.1906,437.7656 L3405.7219,437.7656 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="35" x="3429.2" y="446.1543">Event</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3371.5" x2="3490.5" y1="458" y2="458"/><ellipse cx="3381.5" cy="469" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="95" x="3390.5" y="472.2104">timestamp: Date</text><ellipse cx="3381.5" cy="481.8047" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="61" x="3390.5" y="485.0151">user: User</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3371.5" x2="3490.5" y1="491.6094" y2="491.6094"/><!--MD5=[b5572b4449e12ec7181779edf851712f]
class StartRoutingEvent--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="79.5469" id="StartRoutingEvent" style="stroke: #A80036; stroke-width: 1.5;" width="184" x="2957" y="570.5"/><ellipse cx="2989.1" cy="589.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2985.0219,585.2344 L2985.0219,583.0781 L2992.4125,583.0781 L2992.4125,585.2344 L2989.9438,585.2344 L2989.9438,593.3125 L2992.4125,593.3125 L2992.4125,595.4688 L2985.0219,595.4688 L2985.0219,593.3125 L2987.4906,593.3125 L2987.4906,585.2344 L2985.0219,585.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="99" x="3014.4" y="586.6387">«domain event»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="114" x="3006.9" y="600.6074">StartRoutingEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2958" x2="3140" y1="608.4375" y2="608.4375"/><ellipse cx="2968" cy="619.4375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="2977" y="622.6479">arrivalPosition: GPSPosition</text><ellipse cx="2968" cy="632.2422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="155" x="2977" y="635.4526">estimatedArrivalTime: Date</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2958" x2="3140" y1="642.0469" y2="642.0469"/><!--MD5=[426b3d26fd8d1889bcd1314289c95b08]
class TrackingEvent--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="66.7422" id="TrackingEvent" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="3538" y="577"/><ellipse cx="3562.45" cy="595.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3558.3719,591.7344 L3558.3719,589.5781 L3565.7625,589.5781 L3565.7625,591.7344 L3563.2938,591.7344 L3563.2938,599.8125 L3565.7625,599.8125 L3565.7625,601.9688 L3558.3719,601.9688 L3558.3719,599.8125 L3560.8406,599.8125 L3560.8406,591.7344 L3558.3719,591.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="99" x="3576.55" y="593.1387">«domain event»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="88" x="3582.05" y="607.1074">TrackingEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3539" x2="3685" y1="614.9375" y2="614.9375"/><ellipse cx="3549" cy="625.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="3558" y="629.1479">position: GPSPosition</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3539" x2="3685" y1="635.7422" y2="635.7422"/><!--MD5=[28266cecb69f5f2771d0d0396d2cdff5]
class StopRoutingEvent--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="53.9375" id="StopRoutingEvent" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="3359" y="583.5"/><ellipse cx="3374" cy="602.4688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3369.9219,598.2344 L3369.9219,596.0781 L3377.3125,596.0781 L3377.3125,598.2344 L3374.8438,598.2344 L3374.8438,606.3125 L3377.3125,606.3125 L3377.3125,608.4688 L3369.9219,608.4688 L3369.9219,606.3125 L3372.3906,606.3125 L3372.3906,598.2344 L3369.9219,598.2344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="99" x="3394.5" y="599.6387">«domain event»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="112" x="3388" y="613.6074">StopRoutingEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3360" x2="3502" y1="621.4375" y2="621.4375"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="3360" x2="3502" y1="629.4375" y2="629.4375"/><!--MD5=[16f40eb7ddafee2ab9f4813071c646da]
class SOSAlertEvent--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="66.7422" id="SOSAlertEvent" style="stroke: #A80036; stroke-width: 1.5;" width="148" x="3176" y="577"/><ellipse cx="3200.45" cy="595.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3196.3719,591.7344 L3196.3719,589.5781 L3203.7625,589.5781 L3203.7625,591.7344 L3201.2938,591.7344 L3201.2938,599.8125 L3203.7625,599.8125 L3203.7625,601.9688 L3196.3719,601.9688 L3196.3719,599.8125 L3198.8406,599.8125 L3198.8406,591.7344 L3196.3719,591.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="99" x="3214.55" y="593.1387">«domain event»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="88" x="3220.05" y="607.1074">SOSAlertEvent</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3177" x2="3323" y1="614.9375" y2="614.9375"/><ellipse cx="3187" cy="625.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="3196" y="629.1479">position: GPSPosition</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3177" x2="3323" y1="635.7422" y2="635.7422"/><!--MD5=[fc92a9f5bb5fae84dd7fa4034e6b4444]
class Route--><rect fill="#FEFECE" filter="url(#fztwy7nfv8a3b)" height="92.3516" id="Route" style="stroke: #A80036; stroke-width: 1.5;" width="293" x="2957.5" y="721"/><ellipse cx="3046.75" cy="739.9688" fill="#B4A7E5" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3042.6719,735.7344 L3042.6719,733.5781 L3050.0625,733.5781 L3050.0625,735.7344 L3047.5938,735.7344 L3047.5938,743.8125 L3050.0625,743.8125 L3050.0625,745.9688 L3042.6719,745.9688 L3042.6719,743.8125 L3045.1406,743.8125 L3045.1406,735.7344 L3042.6719,735.7344 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="110" x="3065.25" y="737.1387">«aggregate root»</text><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="37" x="3101.75" y="751.1074">Route</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2958.5" x2="3249.5" y1="758.9375" y2="758.9375"/><ellipse cx="2968.5" cy="769.9375" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="140" x="2977.5" y="773.1479">event: StartRoutingEvent</text><ellipse cx="2968.5" cy="782.7422" fill="none" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="177" x="2977.5" y="785.9526">positions: List&lt;TrackingEvent&gt;</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2958.5" x2="3249.5" y1="792.5469" y2="792.5469"/><ellipse cx="2968.5" cy="803.5469" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="267" x="2977.5" y="806.7573">addTrace(TrackingEvent: TrackingEvent): Route</text><!--MD5=[2a4e8f39d00eafccce3f9892bd4177f8]
link UserId to User--><path d="M3437.59,199.72 C3451.27,220.09 3470.64,248.96 3487.28,273.75 " fill="none" id="UserId-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3494.7,284.81,3494.6758,277.5989,3488.0101,274.8478,3488.0343,282.0588,3494.7,284.81" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="3430.3441" y="219.4033">N</text><!--MD5=[fb427938b624a3e68e8dd02b7e4ef7d6]
link GroupId to User--><path d="M3558.34,199.57 C3552.32,211.08 3545.69,224.94 3541,238 C3537.13,248.79 3533.81,260.6 3531.06,271.93 " fill="none" id="GroupId-&gt;User" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3528.08,284.92,3533.3177,279.9636,3530.7571,273.2224,3525.5194,278.1788,3528.08,284.92" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="3543.7936" y="219.6538">N</text><!--MD5=[29793cb2e6ce1def3d6fecaef4efbf08]
link User to Event--><path d="M3494.97,365.34 C3484.86,380.61 3473.19,398.25 3462.6,414.25 " fill="none" id="User-&gt;Event" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3455.12,425.55,3461.7688,422.7583,3461.749,415.5472,3455.1002,418.3389,3455.12,425.55" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="3482.5593" y="384.4764">1</text><!--MD5=[e805be7ffdaeae8940b4bb16324a6722]
reverse link Event to StartRoutingEvent--><path d="M3351.14,490.77 C3296.63,509.46 3222.99,535.52 3159,561 C3151.53,563.97 3143.83,567.15 3136.12,570.4 " fill="none" id="Event&lt;-StartRoutingEvent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3349.11,484.06,3370.3,484.23,3353.63,497.31,3349.11,484.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22349fc73029f5d7cd31c5c8ebbbbb7e]
reverse link StartRoutingEvent to GPSPosition--><path d="M3146.43,656.17 C3203.48,682.32 3273.83,714.57 3323.49,737.34 " fill="none" id="StartRoutingEvent&lt;-GPSPosition" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3134.47,650.69,3138.258,656.826,3145.379,655.6894,3141.591,649.5534,3134.47,650.69" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="3307.3841" y="729.9137">1</text><!--MD5=[158a296f12c94f17d70ec09bd0600e6c]
reverse link Event to TrackingEvent--><path d="M3491.93,512.98 C3518.1,534.02 3547.98,558.03 3571.38,576.85 " fill="none" id="Event&lt;-TrackingEvent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3487.41,518.33,3476.21,500.34,3496.18,507.42,3487.41,518.33" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[6ad749c434dee423e6feea55b47e51b5]
reverse link TrackingEvent to GPSPosition--><path d="M3553.2,651.7 C3519.28,674.88 3476.83,703.9 3443.19,726.9 " fill="none" id="TrackingEvent&lt;-GPSPosition" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3564.35,644.08,3557.1394,644.1614,3554.4411,650.8486,3561.6518,650.7673,3564.35,644.08" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="3444.332" y="715.836">1</text><!--MD5=[8fee1e135a99ff52f8d2c0e12e9bb9ad]
reverse link Event to StopRoutingEvent--><path d="M3431,520.56 C3431,542.16 3431,565.76 3431,583.22 " fill="none" id="Event&lt;-StopRoutingEvent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3424,520.34,3431,500.34,3438,520.34,3424,520.34" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[90febbe0254b60555237ba90363bc41c]
reverse link Event to SOSAlertEvent--><path d="M3370.07,512.98 C3343.9,534.02 3314.02,558.03 3290.62,576.85 " fill="none" id="Event&lt;-SOSAlertEvent" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="3365.82,507.42,3385.79,500.34,3374.59,518.33,3365.82,507.42" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[04467fb5db5e3707fbe95bd87ce531cf]
reverse link SOSAlertEvent to GPSPosition--><path d="M3287.7,654.33 C3307.73,677.08 3332.17,704.84 3351.66,726.99 " fill="none" id="SOSAlertEvent&lt;-GPSPosition" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3278.84,644.27,3279.8007,651.4168,3286.7672,653.2788,3285.8066,646.132,3278.84,644.27" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="3337.0703" y="715.9415">1</text><!--MD5=[c67d2c7dc29015c65481d9fa164baccb]
link StartRoutingEvent to Route--><path d="M3063.02,650.89 C3069.26,668.41 3076.73,689.4 3083.57,708.62 " fill="none" id="StartRoutingEvent-&gt;Route" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3087.96,720.94,3089.7193,713.9468,3083.9407,709.6331,3082.1814,716.6264,3087.96,720.94" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="8" x="3056.4917" y="670.0338">1</text><!--MD5=[1218d0a2d789d519eb1e342353ce5472]
link TrackingEvent to Route--><path d="M3555.71,644.19 C3544.44,649.96 3532.52,655.54 3521,660 C3473.92,678.22 3360.28,706.76 3263.51,729.63 " fill="none" id="TrackingEvent-&gt;Route" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3250.59,732.68,3257.3454,735.2028,3262.2724,729.9374,3255.517,727.4146,3250.59,732.68" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="10" x="3534.4097" y="663.8873">N</text><!--MD5=[a32c727f83410508355b69b6422e47a8]
link TrackingEvent to TrackingEventsStore--><path d="M3659.44,644.08 C3691.34,665.98 3733.87,695.18 3769.31,719.52 " fill="none" id="TrackingEvent-&gt;TrackingEventsStore" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3780.06,726.9,3777.3781,720.2062,3770.1677,720.1073,3772.8496,726.8011,3780.06,726.9" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[66250c5e165560474279fb008f651387]
link Route to RoutesStore--><path d="M3045.66,813.08 C3023.41,830.28 2997.83,850.04 2974.7,867.92 " fill="none" id="Route-&gt;RoutesStore" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="2964.26,875.98,2971.4537,875.4787,2973.7577,868.6456,2966.5641,869.1469,2964.26,875.98" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d11b04e57a4b297740bbf0e64c68ec11]
link NotificationsService$$$LEFT to NotificationsService--><!--MD5=[94317d667556c12b2c9e793a2a8f51ff]
reverse link NotificationsService to User--><path d="M3940.73,209.56 C3836.53,237.97 3694.41,276.72 3605.19,301.04 " fill="none" id="NotificationsService&lt;-User" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3953.56,206.06,3946.72,203.7764,3941.9813,209.2118,3948.8213,211.4955,3953.56,206.06" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b4e2d00384368036654d547cbcb5bac8]
link GPSPosition to MapsService--><path d="M3395.69,807 C3400.36,825.81 3406.03,848.64 3411.06,868.92 " fill="none" id="GPSPosition-&gt;MapsService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3414.26,881.8,3416.6998,875.0142,3411.3744,870.1521,3408.9346,876.9379,3414.26,881.8" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[86234a4991e781850e0fa47970029ff7]
link UserTrackingInfoService to UserTrackingInfoService$$$RIGHT--><!--MD5=[17bbc69193a8c7c9ee706f25bd332264]
reverse link UserTrackingInfoService to TrackingEvent--><path d="M3707.89,610.5 C3700.65,610.5 3693.42,610.5 3686.18,610.5 " fill="none" id="UserTrackingInfoService&lt;-TrackingEvent" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3720.92,610.5,3714.92,606.5,3708.92,610.5,3714.92,614.5,3720.92,610.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[bfee41ece8b0b51fef8f4c910a066be9]
reverse link UserTrackingInfoService to State--><path d="M3982.54,610.5 C3989.62,610.5 3996.7,610.5 4003.77,610.5 " fill="none" id="UserTrackingInfoService&lt;-State" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3969.38,610.5,3975.3844,614.4934,3981.38,610.4868,3975.3756,606.4934,3969.38,610.5" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[aa645f66c6f852f0578c58dbb85c472d]
reverse link RoutesTrackingService to Event--><path d="M2937.23,363.9 C2938.49,364.28 2939.75,364.64 2941,365 C3092.95,408.48 3276.89,439.21 3370.26,453.31 " fill="none" id="RoutesTrackingService&lt;-Event" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="2924.76,360.01,2929.303,365.6101,2936.2196,363.5705,2931.6766,357.9704,2924.76,360.01" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[8000856f474095493a4f8f23fb3f90af]
link Route to RoutesInfoService--><path d="M3104,813.08 C3104,832.7 3104,855.66 3104,875.35 " fill="none" id="Route-&gt;RoutesInfoService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3104,888.38,3108,882.38,3104,876.38,3100,882.38,3104,888.38" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[84b31b838b6a4839ce374244a10ec907]
link Event to RealTimeTrackingService--><path d="M3491.86,463 C3562.76,463 3633.67,463 3704.57,463 " fill="none" id="Event-&gt;RealTimeTrackingService" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#FFFFFF" points="3717.81,463,3711.81,459,3705.81,463,3711.81,467,3717.81,463" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[af13d64848309e620a7c1ac11925cbf1]
reverse link application.NotificationsService to NotificationsServiceAdapter--><path d="M1812.97,203.65 C1807.64,205.36 1802.28,206.85 1797,208 C1541.55,263.54 881.63,217.72 621,238 C460.13,250.52 418.44,249.66 261,285 C242.26,289.21 222.29,295.06 204.08,300.95 " fill="none" id="application.NotificationsService&lt;-NotificationsServiceAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="1810.69,197.03,1831.87,196.67,1815.54,210.17,1810.69,197.03" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[c570e8466adfbcb5ba14147795824399]
reverse link application.MapsService to MapsServiceAdapter--><path d="M2602.19,204.27 C2598.12,205.7 2594.04,206.97 2590,208 C2469.91,238.71 2156.77,231.25 2033,238 C1654.32,258.64 1551.35,203.38 1181,285 C1167.23,288.03 1152.88,292.77 1139.54,297.91 " fill="none" id="application.MapsService&lt;-MapsServiceAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="2599.63,197.75,2620.79,196.64,2604.94,210.7,2599.63,197.75" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[fd5f34080bdc661246a43120c838306f]
reverse link application.RealTimeTrackingService to RealTimeTrackingKafkaAdapter--><path d="M2411.01,198.02 C2397.27,202.07 2382.8,205.69 2369,208 C2135.06,247.2 1538.29,217.18 1302,238 C1160.56,250.46 1124.61,254.22 986,285 C969.67,288.63 952.4,293.21 935.94,297.96 " fill="none" id="application.RealTimeTrackingService&lt;-RealTimeTrackingKafkaAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2416.03,196.51,2406.2595,195.2702,2411.2417,197.9494,2408.5625,202.9315,2416.03,196.51" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="1303" y="251.0669">«uses»</text><!--MD5=[02efb7b1f53ae6e3309c5e3fa0c66e68]
reverse link application.UserTrackingInfoService to UserTrackingInfoGrpcAdapter--><path d="M2193.27,198.02 C2179.78,202.07 2165.57,205.69 2152,208 C1918.38,247.78 1322.25,219.34 1086,238 C924.7,250.74 883.08,250.51 725,285 C708.89,288.51 691.88,293.14 675.74,297.97 " fill="none" id="application.UserTrackingInfoService&lt;-UserTrackingInfoGrpcAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2198.21,196.52,2188.4319,195.3416,2193.4308,197.9894,2190.783,202.9883,2198.21,196.52" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="1087" y="251.0669">«uses»</text><!--MD5=[4d16eab11c159215cc652d3778b9b798]
reverse link application.RoutesTrackingService to RoutesTrackingServiceKafkaAdapter--><path d="M2757.33,202.34 C2749.51,204.5 2741.65,206.45 2734,208 C2319.32,292.33 2201.93,212.64 1785,285 C1762.14,288.97 1737.65,294.89 1715.43,300.93 " fill="none" id="application.RoutesTrackingService&lt;-RoutesTrackingServiceKafkaAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="none" points="2755.35,195.62,2776.52,196.59,2759.37,209.03,2755.35,195.62" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[745128e1deb0a90a15c70a64de307c97]
reverse link application.RoutesInfoService to RoutesInfoGrpcAdapter--><path d="M2006.21,198.46 C1995.39,202.35 1983.99,205.79 1973,208 C1725.19,257.74 1087.99,218.37 836,238 C674.25,250.6 631.62,246.54 474,285 C457.1,289.12 439.17,295.02 422.92,300.99 " fill="none" id="application.RoutesInfoService&lt;-RoutesInfoGrpcAdapter" style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 7.0,7.0;"/><polygon fill="#A80036" points="2011.13,196.65,2001.3036,195.9857,2006.4344,198.3679,2004.0522,203.4987,2011.13,196.65" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="46" x="837" y="251.0669">«uses»</text><!--MD5=[274785d223fe3c1096722af9e68037c2]
@startuml location-service-structure
package infrastructure {
    package application {
        package domain {
            interface GPSPosition <<value object>> {
                + latitude: Double
                + longitude: Double
            }


            interface User <<entity>> {
                + id: UserId
                + inGroups: Set<GroupId>
            }
            interface UserId <<value object>>
            interface GroupId <<value object>>

            User *-u- "N" UserId
            User *-u- "N" GroupId

            interface Event {
                + timestamp: Date
                + user: User
            }

            User "1" - -* Event

            interface StartRoutingEvent <<domain event>> extends Event {
                + arrivalPosition: GPSPosition
                + estimatedArrivalTime: Date
            }

            StartRoutingEvent *- - "1" GPSPosition

            interface TrackingEvent <<domain event>> extends Event {
                + position: GPSPosition
            }

            TrackingEvent *- - "1" GPSPosition

            interface StopRoutingEvent <<domain event>> extends Event

            interface SOSAlertEvent <<domain event>> extends Event {
                + position: GPSPosition
            }

            SOSAlertEvent *- - "1" GPSPosition
            
            interface Route <<aggregate root>> {
                + event: StartRoutingEvent
                + positions: List<TrackingEvent>
                + addTrace(TrackingEvent: TrackingEvent): Route
            }

            Route *-u- "1" StartRoutingEvent
            Route *-u- "N" TrackingEvent
        }

        interface TrackingEventsStore <<outbound port>> {
            + update(TrackingEvent: TrackingEvent)
            + by(user: User): TrackingEvent
        }

        TrackingEventsStore o.up. TrackingEvent

        interface RoutesStore <<outbound port>> {
            + update(Route: Route)
            + by(user: User): Route
            + delete(Route: Route)
        }

        RoutesStore o.up. Route

        interface NotificationsService <<outbound port>> {
            + notify(notificationEvent: NotificationEvent)
        }
        note left of NotificationsService::notify
            ""NotificationEvent"" is in 
            shared kernel module (?)
        end note

        NotificationsService o.. User

        interface MapsService <<outbound port>> {
            + estimateArrivalTime(start: GPSPosition, end: GPSPosition): Date
            + distance(start: GPSPosition, end: GPSPosition): GPSPosition
        }

        MapsService o.up. GPSPosition

        interface UserTrackingInfoService <<inbound port>> {
            + lastTraceOf(user: User): TrackingEvent
            + routeOf(user: User): Route
            + lastStateOf(user: User): State
        }
        note right of UserTrackingInfoService::routeOf
            At most 1 
            route per
            user per 
            time is active
        end note
        enum State {
            + ACTIVE,
            + INACTIVE,
            + SOS,
            + ROUTING
        }

        UserTrackingInfoService o.r. TrackingEvent
        UserTrackingInfoService o.r. State

        interface RoutesTrackingService <<outbound port>> {
            + onNewRoute()
            + onRoutingEvent()
        }
        RoutesTrackingService o.. Event

        interface RoutesInfoService <<inbound port>> {
            + routeOf(user: User): Route
        }
        RoutesInfoService o.u. Route

        interface RealTimeTrackingService <<inbound port>> {
            + onNewEvent(event: Event)
        }
        RealTimeTrackingService o.l. Event
    }

    class NotificationsServiceAdapter implements application.NotificationsService
    note top of NotificationsServiceAdapter
        This class is an adapter 
        that forwards notifications to 
        the notification microservice
        through message broker
    end note

    class MapsServiceAdapter <<outbound adapter>> implements application.MapsService
    note right of MapsServiceAdapter
        Uses external geocoding and maps APIs
    endnote

    class RealTimeTrackingKafkaAdapter <<inbound adapter>>
    RealTimeTrackingKafkaAdapter .up.> application.RealTimeTrackingService : <<uses>>

    class UserTrackingInfoGrpcAdapter <<inbound adapter>> 
    UserTrackingInfoGrpcAdapter .up.> application.UserTrackingInfoService : <<uses>>

    class RoutesTrackingServiceKafkaAdapter implements application.RoutesTrackingService

    class RoutesInfoGrpcAdapter
    RoutesInfoGrpcAdapter .up.> application.RoutesInfoService : <<uses>>
}
@enduml

PlantUML version 1.2020.02(Sun Mar 01 10:22:07 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.24+8
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>